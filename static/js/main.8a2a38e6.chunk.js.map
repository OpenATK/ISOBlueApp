{"version":3,"sources":["../../cerebral-module/build/index.js","../../cerebral-module/build/sequences.js","../../cerebral-module/build/provider.js","../../cerebral-module/build/state.js","components/AppBar.jsx","components/Drawer.jsx","components/Map.jsx","components/App.jsx","app/oadatrees.js","app/actions.js","app/sequences.js","app/state.js","app/index.js","serviceWorker.js","index.js"],"names":["Object","defineProperty","exports","value","default","_sequences","_interopRequireDefault","require","_provider","obj","__esModule","_default","state","providers","oada","sequences","_cerebral","_bluebird","_url","_lodash","_templateObject24","data","_taggedTemplateLiteral","_templateObject23","_templateObject22","_templateObject21","_templateObject20","_templateObject19","_templateObject18","_templateObject17","_templateObject16","_templateObject15","_templateObject14","_templateObject13","_templateObject12","_templateObject11","_templateObject10","_templateObject9","_templateObject8","_templateObject7","_templateObject6","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","strings","raw","slice","freeze","defineProperties","domainToConnectionId","domainUrl","parse","hostname","replace","delete","_ref7","props","requests","Error","concurrent","map","mapSeries","request","i","complete","_cerebralPath","path","split","join","conn","get","concat","connection_id","unwatch","watches","url","headers","type","tree","then","response","unset","responses","_ref5","store","watch","signals","payload","_responseData","parts","partialPath","forEach","part","set","catch","err","console","log","put","_ref6","oldState","cloneDeep","newState","merge","post","_ref10","location","connect","_ref","domain","options","cache","token","websocket","authorized","connection","unauthorized","_ref2","_ref3","error","message","resetCache","_ref8","disconnect","_ref9","handleWatch","_ref4","rootCerebralPath","Array","isArray","change","_oldState","item","changeRelativePath","changeCerebralPath","newObj","body","nullPath","_oadaCache","connections","args","Promise","resolve","sigs","signal","context","controller","hasOwnProperty","getSignal","getSequence","func","undefined","Component","classes","this","Toolbar","IconButton","color","aria-label","onClick","toggleDrawer","className","icon","Typography","variant","flex","connectopmStatusIndicator","React","withStyles","theme","marginLeft","deviceDetails","selectedDevice","device","day","hour","days","keys","bookmarks","isoblue","hours","daySelector","Select","renderValue","onChange","selectDay","target","date","MenuItem","key","tzOffsetMinutes","Date","getTimezoneOffset","genTimeLabel","hhmm","localMinutes","parseInt","msg","localMM","Math","floor","toString","padStart","hourSelector","selectHour","List","Divider","ListItem","ListItemText","align","primary","Button","unselectDevice","Drawer","open","drawer","onClose","paper","drawerPaper","toolbar","list","component","devices","button","selectDevice","ListItemIcon","ListItemSecondaryAction","Switch","edge","toggleDeviceSync","checked","sync","inputProps","position","width","backgroundColor","mixins","withTheme","DefaultIcon","L","iconUrl","shadowUrl","iconShadow","Marker","prototype","MapComponent","markers","lat","lng","push","CircleMarker","ref","center","fillColor","fillOpacity","radius","zIndexOffset","e","Tooltip","direction","offset","permanent","pts","isNaN","Map","mapCenter","zoom","maxZoom","preferCanvas","style","height","TileLayer","attribution","display","AppComponent","root","AppBar","appBar","content","Modal","aria-labelledby","aria-describedby","modalOverlay","App","flexGrow","zIndex","overflow","masterTree","_type","_rev","hourTree","dayTree","deviceTree","setDayListRequest","oadatrees","setHourListRequest","setLocationDataRequest","getMostRecentDay","day_index","date_list","length","_","maxBy","o","getMostRecentHour","hour_index","max","Number","getMostRecentLocation","hour_dataset","latest_data_point","values","reduce","latest","data_point","time","updateDeviceListState","device_state","device_name","watchPath","oadaModule","initialize","actions","handleNewDevice","handleDeviceLocationUpdate","handleDayUpdate","toggle","when","true","false","components","app","on","modules","devtools","Boolean","window","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8a2a38e6.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequences = _interopRequireDefault(require(\"./sequences\"));\n\nvar _provider = _interopRequireDefault(require(\"./provider\"));\n\nvar _state = _interopRequireDefault(require(\"./state\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = {\n  state: _state.default,\n  providers: {\n    oada: _provider.default\n  },\n  sequences: _sequences.default\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _cerebral = require(\"cerebral\");\n\nvar _factories = require(\"cerebral/factories\");\n\nvar _bluebird = _interopRequireDefault(require(\"bluebird\"));\n\nvar _url = _interopRequireDefault(require(\"url\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _templateObject24() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \".connected\"]);\n\n  _templateObject24 = function _templateObject24() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject23() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject23 = function _templateObject23() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject22() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject22 = function _templateObject22() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject21() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject21 = function _templateObject21() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject20() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject20 = function _templateObject20() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject19() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject19 = function _templateObject19() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject18() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject18 = function _templateObject18() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"oada.\", \"\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"oada.\", \".\", \"\", \"\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"oada.\", \"\", \"\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"oada.\", \".\", \"\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"oada.\", \".\", \"\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\", \"\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"oada.error\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \".connected\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \".connected\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"oada.\", \".bookmarks\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"oada.\", \".bookmarks\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \".domain\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \".token\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"oada.connections.\", \"\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\n//Promise.config({warnings: false})\nfunction domainToConnectionId(domainUrl) {\n  var domain = _url.default.parse(domainUrl).hostname;\n\n  return domain.replace(/\\./g, \"_\");\n}\n/**\n * connects to the oada, returns and object with get, put, post, resetCache, disconnect\n * @type {Primitive}\n */\n\n\nvar connect = [(_ref) => {\n  var {\n    oada,\n    path,\n    props\n  } = _ref;\n  return oada.connect({\n    connection_id: props.connection_id || domainToConnectionId(props.domain),\n    domain: props.domain,\n    options: props.options,\n    cache: props.cache,\n    token: props.token,\n    websocket: props.websocket\n  }).then(response => {\n    return path.authorized({\n      token: response.token,\n      connection: response,\n      connection_id: props.connection_id || domainToConnectionId(props.domain)\n    }); //return result;\n  }).catch(err => {\n    return path.unauthorized({\n      err\n    });\n  });\n}, {\n  authorized: [(_ref2) => {\n    var {\n      store,\n      get,\n      oada,\n      props\n    } = _ref2;\n\n    if (get((0, _cerebral.state)(_templateObject(), props.connection_id)) == null) {\n      store.set((0, _cerebral.state)(_templateObject2(), props.connection_id), {});\n    }\n\n    store.set((0, _cerebral.state)(_templateObject3(), props.connection_id), props.token);\n    store.set((0, _cerebral.state)(_templateObject4(), props.connection_id), props.domain);\n    var wh = get((0, _cerebral.state)(_templateObject5(), props.connection_id));\n\n    if (wh) {\n      store.set((0, _cerebral.state)(_templateObject6(), props.connection_id), {});\n    }\n\n    store.set((0, _cerebral.state)(_templateObject7(), props.connection_id), true);\n    return {\n      token: props.token,\n      connection_id: props.connection_id\n    };\n  }],\n  unauthorized: [(_ref3) => {\n    var {\n      store,\n      props\n    } = _ref3;\n    store.set((0, _cerebral.state)(_templateObject8(), props.connection_id), false);\n    store.set((0, _cerebral.state)(_templateObject9()), {\n      error: props.err.message\n    });\n    return {\n      error: props.err,\n      connection_id: props.connection_id\n    };\n  }]\n}];\nvar handleWatch = [(_ref4) => {\n  var {\n    oada,\n    get,\n    path,\n    props,\n    store\n  } = _ref4;\n  // get local state\n  var rootCerebralPath = \"oada.\".concat(props.connection_id, \".\").concat(props.path);\n\n  if (Array.isArray(props.response.change)) {\n    // process array-based change feed\n    var _oldState = _lodash.default.cloneDeep(get((0, _cerebral.state)(_templateObject10(), rootCerebralPath))); // replay changes\n\n\n    props.response.change.forEach(item => {\n      if (item.type === \"merge\") {\n        // merge changes (cerebral's store.merge function does not \"deep-merge\")\n        var changeRelativePath = item.path.split(\"/\").join(\".\");\n        var changeCerebralPath = \"oada.\".concat(props.connection_id, \".\").concat(props.path).concat(changeRelativePath);\n        var obj = get((0, _cerebral.state)(_templateObject11(), changeCerebralPath));\n\n        var newObj = _lodash.default.merge(obj, item.body);\n\n        store.set((0, _cerebral.state)(_templateObject12(), changeCerebralPath), newObj);\n      } else {// TODO\n      }\n    });\n    return {\n      oldState: _oldState\n    };\n  } else {\n    // process tree-based change feed\n    if (props.response.change.type === \"merge\") {\n      var oldState = _lodash.default.cloneDeep(get((0, _cerebral.state)(_templateObject13(), props.connection_id, props.path)));\n\n      var newState = _lodash.default.merge(oldState, props.response.change.body.data);\n\n      store.set((0, _cerebral.state)(_templateObject14(), props.connection_id, props.path), newState);\n      return {\n        oldState\n      };\n    } else if (props.response.change.type === \"delete\") {\n      var nullPath = props.nullPath.split(\"/\").join(\".\");\n\n      var oldState = _lodash.default.cloneDeep(get((0, _cerebral.state)(_templateObject15(), props.connection_id, nullPath)));\n\n      store.unset((0, _cerebral.state)(_templateObject16(), props.connection_id, props.path, nullPath));\n      return {\n        oldState\n      };\n    }\n  }\n}];\n/**\n * using the connection_id provided, it GET requests to the server\n * @type {Primitive}\n */\n\nvar get = [(_ref5) => {\n  var {\n    oada,\n    store,\n    get,\n    props\n  } = _ref5;\n  if (!props.requests) throw new Error(\"Passing request parameters as top level keys of cerebral props has been deprecated. Instead, pass requests in as an array of request objects under the requests key\");\n  var requests = props.requests || [];\n  var PromiseMap = props.concurrent ? _bluebird.default.map : _bluebird.default.mapSeries;\n  return PromiseMap(requests, (request, i) => {\n    if (request.complete) return;\n\n    var _cerebralPath = request.path.replace(/^\\//, \"\").split(\"/\").join(\".\");\n\n    if (request.watch) {\n      var conn = get((0, _cerebral.state)(_templateObject17(), request.connection_id || props.connection_id));\n\n      if (conn) {\n        if (conn && conn.watches && conn.watches[request.path]) return;\n        request.watch.signals = [\"oada.handleWatch\", ...request.watch.signals];\n        request.watch.payload = request.watch.payload || {};\n        request.watch.payload.connection_id = request.connection_id || props.connection_id;\n        request.watch.payload.path = _cerebralPath;\n      }\n    }\n\n    return oada.get({\n      connection_id: request.connection_id || props.connection_id,\n      url: request.url,\n      path: request.path,\n      headers: request.headers,\n      watch: request.watch,\n      tree: request.tree || props.tree\n    }).then(response => {\n      var _responseData = response.data; //Build out path one object at a time.\n\n      var path = \"oada.\".concat(request.connection_id || props.connection_id, \".\").concat(_cerebralPath);\n      var parts = path.split(\".\");\n      var partialPath = \"\";\n      parts.forEach(part => {\n        partialPath = partialPath + part;\n\n        if (get((0, _cerebral.state)(_templateObject18(), partialPath)) == null) {\n          store.set((0, _cerebral.state)(_templateObject19(), partialPath), {});\n        }\n\n        partialPath = partialPath + \".\";\n      }); //Set response\n\n      if (_responseData) store.set((0, _cerebral.state)(_templateObject20(), path), _responseData);\n\n      if (request.watch) {\n        //TODO build path part by part\n        path = \"oada.\".concat(request.connection_id || props.connection_id, \".watches.\").concat(request.path);\n        parts = path.split(\".\");\n        partialPath = \"\";\n        parts.forEach(part => {\n          partialPath = partialPath + part;\n\n          if (get((0, _cerebral.state)(_templateObject21(), partialPath)) == null) {\n            store.set((0, _cerebral.state)(_templateObject22(), partialPath), {});\n          }\n\n          partialPath = partialPath + \".\";\n        });\n        store.set((0, _cerebral.state)(_templateObject23(), path), true); //store.set(state`oada.${request.connection_id || props.connection_id}.watches.${request.path}`, true)\n      }\n\n      requests[i].complete = true;\n      return response;\n    }).catch(err => {\n      console.log(\"Error in oada.get\", err);\n      return err;\n    });\n  }).then(responses => {\n    return {\n      responses,\n      requests\n    };\n  });\n} // oada state props\n];\n/**\n * it PUT requests the resource to the server\n * @type {Primitive}\n */\n\nvar put = [(_ref6) => {\n  var {\n    oada,\n    state,\n    props\n  } = _ref6;\n  if (!props.requests) throw new Error(\"Passing request parameters as top level keys of cerebral props has been deprecated. Instead, pass requests in as an array of request objects under the requests key\");\n  var requests = props.requests || [];\n  var PromiseMap = props.concurrent ? _bluebird.default.map : _bluebird.default.mapSeries;\n  return PromiseMap(requests, (request, i) => {\n    if (request.complete) return;\n    return oada.put({\n      url: request.url,\n      //props.domain + ((request.path[0] === '/') ? '':'/') + request.path,\n      path: request.path,\n      data: request.data,\n      type: request.type,\n      headers: request.headers,\n      tree: request.tree || props.tree,\n      connection_id: request.connection_id || props.connection_id\n    }).then(response => {\n      var oldState = _lodash.default.cloneDeep(state.get(\"oada.\".concat(request.connection_id || props.connection_id).concat(request.path.split(\"/\").join(\".\"))));\n\n      var newState = _lodash.default.merge(oldState, request.data); //Build out path one object at a time.\n\n\n      var path = \"oada.\".concat(request.connection_id || props.connection_id).concat(request.path.split(\"/\").join(\".\"));\n      var parts = path.split(\".\");\n      var partialPath = \"\";\n      parts.forEach(part => {\n        partialPath = partialPath + part;\n\n        if (state.get(partialPath) == null) {\n          state.set(partialPath, {});\n        }\n\n        partialPath = partialPath + \".\";\n      });\n      state.set(path, newState);\n      requests[i].complete = true;\n      return response;\n    });\n  }).then(responses => {\n    return {\n      responses,\n      requests\n    };\n  });\n}];\n/**\n * requests a DELETE operation to the server. We utilize the connection_id to know which connection to use\n * @type {Primitive}\n */\n\nvar oadaDelete = [(_ref7) => {\n  var {\n    oada,\n    state,\n    props\n  } = _ref7;\n  if (!props.requests) throw new Error(\"Passing request parameters as top level keys of cerebral props has been deprecated. Instead, pass requests in as an array of request objects under the requests key\");\n  var requests = props.requests || [];\n  var PromiseMap = props.concurrent ? _bluebird.default.map : _bluebird.default.mapSeries;\n  return PromiseMap(requests, (request, i) => {\n    if (request.complete) return;\n\n    var _cerebralPath = request.path.replace(/^\\//, \"\").split(\"/\").join(\".\");\n\n    var conn = state.get(\"oada.\".concat(request.connection_id || props.connection_id));\n\n    if (request.unwatch && conn && conn.watches) {\n      // Don't send the unwatch request if it isn't being watched already.\n      if (!conn.watches[request.path]) return;\n    }\n\n    return oada.delete({\n      connection_id: request.connection_id || props.connection_id,\n      url: request.url,\n      path: request.path,\n      headers: request.headers,\n      unwatch: request.unwatch,\n      type: request.type,\n      tree: request.tree || props.tree\n    }).then(response => {\n      //Handle watches index and optimistically update\n      if (request.unwatch && conn && conn.watches) {\n        state.unset(\"oada.\".concat(request.connection_id || props.connection_id, \".watches.\").concat(request.path));\n      } else {\n        state.unset(\"oada.\".concat(request.connection_id || props.connection_id, \".\").concat(_cerebralPath));\n      }\n\n      requests[i].complete = true;\n      return response;\n    });\n  }).then(responses => {\n    return {\n      responses,\n      requests\n    };\n  });\n}];\n/**\n * resets or clears the cache\n * @type {Primitive}\n */\n\nvar resetCache = [(_ref8) => {\n  var {\n    oada,\n    state,\n    props\n  } = _ref8;\n  return oada.resetCache({\n    connection_id: props.connection_id || domainToConnectionId(props.domain)\n  });\n}];\n/**\n * disconnects from the framework\n * @type {Primitive}\n */\n\nvar disconnect = [(_ref9) => {\n  var {\n    oada,\n    store,\n    props\n  } = _ref9;\n  store.set((0, _cerebral.state)(_templateObject24(), props.connection_id), false);\n  return oada.disconnect({\n    connection_id: props.connection_id\n  });\n}];\n/**\n * it POST requests the resource to the server\n * @type {Primitive}\n */\n\nvar post = [(_ref10) => {\n  var {\n    oada,\n    state,\n    props\n  } = _ref10;\n  if (!props.requests) throw new Error(\"Passing request parameters as top level keys of cerebral props has been deprecated. Instead, pass requests in as an array of request objects under the requests key\");\n  var requests = props.requests || [];\n  var PromiseMap = props.concurrent ? _bluebird.default.map : _bluebird.default.mapSeries;\n  return PromiseMap(requests, (request, i) => {\n    if (request.complete) return;\n    return oada.post({\n      url: request.url,\n      //props.domain + ((request.path[0] === '/') ? '':'/') + request.path,\n      path: request.path,\n      data: request.data,\n      type: request.type,\n      headers: request.headers,\n      tree: request.tree || props.tree,\n      connection_id: request.connection_id || props.connection_id\n    }).then(response => {\n      var id = response.headers.location;\n\n      var oldState = _lodash.default.cloneDeep(state.get(\"oada.\".concat(request.connection_id || props.connection_id).concat(request.path.split(\"/\").join(\".\"))));\n\n      var newState = _lodash.default.merge(oldState, request.data);\n\n      state.set(\"oada.\".concat(request.connection_id || props.connection_id, \".\").concat(request.path.split(\"/\").join(\".\")), newState);\n      requests[i].complete = true;\n      return;\n    });\n  }).then(responses => {\n    return {\n      responses\n    };\n  });\n}];\nvar _default = {\n  delete: oadaDelete,\n  get,\n  put,\n  post,\n  connect,\n  resetCache,\n  disconnect,\n  domainToConnectionId,\n  handleWatch\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _cerebral = require(\"cerebral\");\n\nvar _oadaCache = _interopRequireDefault(require(\"@oada/oada-cache\"));\n\nvar _uuid = _interopRequireDefault(require(\"uuid\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar connections = {};\n\nvar connect = function connect(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  if (args.connection_id && connections[args.connection_id]) return Promise.resolve(connections[args.connection_id]);\n  return _oadaCache.default.connect(args).then(conn => {\n    conn.cache = {};\n    connections[args.connection_id] = conn;\n    return conn;\n  });\n};\n\nvar get = function get(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n\n  if (args.watch && args.watch.signals) {\n    var sigs = args.watch.signals.map(signal => {\n      if (this.context) {\n        return this.context.controller.hasOwnProperty(\"getSignal\") ? this.context.controller.getSignal(signal) : this.context.controller.getSequence(signal);\n      }\n    });\n\n    args.watch.func = payload => {\n      sigs.forEach(signal => {\n        signal(payload);\n      });\n    };\n  }\n\n  return connections[args.connection_id].get(args);\n};\n\nvar put = function put(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  return connections[args.connection_id].put(args);\n};\n\nvar post = function post(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  return connections[args.connection_id].post(args);\n};\n\nvar _delete = function _delete(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  return connections[args.connection_id].delete(args);\n};\n\nvar disconnect = function _disconnect(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  var connection = connections[args.connection_id];\n  connections[args.connection_id] = undefined;\n  return connection.disconnect();\n};\n\nvar resetCache = function resetCache(args) {\n  if (!args.connection_id) throw \"connection_id not supplied\";\n  if (!connections[args.connection_id]) return; // reseting a non-existent connection\n\n  return connections[args.connection_id].resetCache(args);\n};\n\nvar _default = {\n  connect,\n  get,\n  put,\n  post,\n  delete: _delete,\n  resetCache,\n  disconnect\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  connections: {}\n};\nexports.default = _default;","import React from \"react\";\nimport { state, sequences } from \"cerebral\";\nimport { connect } from \"@cerebral/react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Toolbar, Typography, IconButton, Grid } from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SyncIcon from \"@material-ui/icons/Sync\";\n\nconst styles = theme => ({\n  flex: {\n    flex: 1,\n  },\n  connectopmStatusIndicator: {\n    marginLeft: \"auto\",\n  },\n});\n\nclass Component extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <Toolbar>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"Open Drawer\"\n          onClick={() => this.props.toggleDrawer()}\n        >\n          <MenuIcon className={classes.icon} />\n        </IconButton>\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n          ISOBlueApp [2.0.1]\n        </Typography>\n        <div className={classes.connectopmStatusIndicator}>\n          <Typography variant=\"h6\" color=\"inherit\">\n            {this.props.connection_id ? \"Connected\" : \"Not Connected\"}\n          </Typography>\n        </div>\n      </Toolbar>\n    );\n  }\n}\n\nexport default connect(\n  {\n    toggleDrawer: sequences`toggleDrawer`,\n    connection_id: state`connection.connection_id`,\n  },\n  withStyles(styles)(Component),\n);\n","import React from \"react\";\nimport { state, sequences } from \"cerebral\";\nimport { connect } from \"@cerebral/react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport {\n  Toolbar,\n  Typography,\n  Drawer,\n  Divider,\n  Switch,\n  Select,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  MenuItem,\n  Button,\n} from \"@material-ui/core\";\nimport RouterIcon from \"@material-ui/icons/Router\";\n\nconst styles = theme => ({\n  drawerPaper: {\n    position: \"relative\",\n    width: 240,\n    backgroundColor: \"#eeeeee\",\n  },\n  toolbar: theme.mixins.toolbar,\n});\n\nclass Component extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    let deviceDetails = <div />;\n    const selectedDevice = this.props.selectedDevice;\n    if (selectedDevice.device && selectedDevice.day && selectedDevice.hour) {\n      const days = Object.keys(\n        this.props.oada[this.props.connection.connection_id].bookmarks.isoblue[\n          \"device-index\"\n        ][selectedDevice.device][\"location\"][\"day-index\"] || {},\n      );\n      const hours = Object.keys(\n        this.props.oada[this.props.connection.connection_id].bookmarks.isoblue[\n          \"device-index\"\n        ][selectedDevice.device][\"location\"][\"day-index\"][selectedDevice.day][\n          \"hour-index\"\n        ] || {},\n      );\n      const daySelector = (\n        <Select\n          value={selectedDevice.day}\n          renderValue={value => `${value}`}\n          onChange={value => this.props.selectDay({ day: value.target.value })}\n        >\n          {days.map(date => (\n            <MenuItem key={date} value={date}>\n              {date}\n            </MenuItem>\n          ))}\n          ;\n        </Select>\n      );\n\n      // Get timezone offset\n      const tzOffsetMinutes = new Date().getTimezoneOffset();\n      const genTimeLabel = hour => {\n        // UTC -> Local time zone conversion\n        // Assume hour has format hh:mm\n        const hhmm = hour.split(\":\");\n        const utcMinutes = hhmm[1]\n          ? 60 * parseInt(hhmm[0]) + parseInt(hhmm[1])\n          : 60 * parseInt(hour);\n        var localMinutes = utcMinutes - tzOffsetMinutes;\n        var msg = \"\";\n        if (localMinutes < 0) {\n          localMinutes += 1440;\n          msg = \" (-1 day)\";\n        } else if (localMinutes > 1440) {\n          localMinutes -= 1440;\n          msg = \" (+1 day)\";\n        }\n        const localHH = Math.floor(localMinutes / 60);\n        const localMM = localMinutes % 60;\n        return (\n          localHH.toString().padStart(2, \"0\") +\n          \":\" +\n          localMM.toString().padStart(2, \"0\") +\n          msg\n        );\n      };\n\n      const hourSelector = (\n        <Select\n          value={selectedDevice.hour}\n          renderValue={value => `${genTimeLabel(value)}`}\n          onChange={value =>\n            this.props.selectHour({ hour: value.target.value })\n          }\n        >\n          {hours.map(hour => {\n            return (\n              <MenuItem key={hour} value={hour}>\n                {genTimeLabel(hour)}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      );\n\n      deviceDetails = (\n        <List>\n          <Divider />\n          <ListItem>\n            <ListItemText\n              align=\"center\"\n              primary={`Device: ${selectedDevice.device}`}\n            />\n          </ListItem>\n          <ListItem>\n            <ListItemText align=\"center\">{daySelector}</ListItemText>\n          </ListItem>\n          <ListItem>\n            <ListItemText align=\"center\">{hourSelector}</ListItemText>\n          </ListItem>\n          <ListItem>\n            <ListItemText align=\"center\">\n              <Button\n                variant=\"contained\"\n                onClick={() => this.props.unselectDevice({})}\n              >\n                Unselect Device\n              </Button>\n            </ListItemText>\n          </ListItem>\n        </List>\n      );\n    }\n\n    return (\n      <Drawer\n        open={this.props.drawer}\n        onClose={() => this.props.toggleDrawer()}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.toolbar} />\n        <List>\n          <ListItem>\n            <ListItemText align=\"center\" primary={\"Available Devices\"} />\n          </ListItem>\n\n          <List className={classes.list} component=\"nav\">\n            {Object.keys(this.props.devices || {}).map(device => (\n              <ListItem\n                button\n                key={`-${device}`}\n                onClick={() => this.props.selectDevice({ device })}\n              >\n                <ListItemIcon>\n                  <RouterIcon />\n                </ListItemIcon>\n                <ListItemText primary={device} />\n                <ListItemSecondaryAction>\n                  <Switch\n                    edge=\"end\"\n                    onChange={() => this.props.toggleDeviceSync({ device })}\n                    checked={this.props.devices[device].sync}\n                    inputProps={{ \"aria-labelledby\": \"switch-list-label-wifi\" }}\n                  />\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n\n          {deviceDetails}\n        </List>\n      </Drawer>\n    );\n  }\n}\n\nexport default connect(\n  {\n    drawer: state`components.drawer`,\n    toggleDrawer: sequences`toggleDrawer`,\n    devices: state`devices`,\n    selectedDevice: state`selectedDevice`,\n    selectDevice: sequences`selectDevice`,\n    selectHour: sequences`selectHour`,\n    selectDay: sequences`selectDay`,\n    unselectDevice: sequences`unselectDevice`,\n    toggleDeviceSync: sequences`toggleDeviceSync`,\n    connection: state`connection`,\n    oada: state`oada`,\n  },\n  withStyles(styles, { withTheme: true })(Component),\n);\n","import React from \"react\";\nimport { state, sequences } from \"cerebral\";\nimport { connect } from \"@cerebral/react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport {\n  Map,\n  TileLayer,\n  Marker,\n  Popup,\n  CircleMarker,\n  Tooltip,\n  Polyline,\n} from \"react-leaflet\";\nimport icon from \"leaflet/dist/images/marker-icon.png\";\nimport iconShadow from \"leaflet/dist/images/marker-shadow.png\";\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\nconst styles = theme => ({\n  map: {\n    position: \"relative\",\n    display: \"flex\",\n    width: \"100%\",\n    height: \"calc(100% - 56px)\",\n  },\n});\n\nclass MapComponent extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    // Device Markers\n    let markers = [];\n    Object.keys(this.props.devices || {}).forEach(device => {\n      if (\n        this.props.devices[device].sync &&\n        this.props.devices[device].location.lat &&\n        this.props.devices[device].location.lng\n      ) {\n        markers.push(\n          <CircleMarker\n            ref={device => {\n              this.device = device;\n            }}\n            key={device}\n            center={[\n              this.props.devices[device].location.lat,\n              this.props.devices[device].location.lng,\n            ]}\n            color={\"#ffffff\"}\n            fillColor={\"#008000\"}\n            fillOpacity={1}\n            radius={12}\n            zIndexOffset={1}\n            onClick={e => this.props.selectDevice({ device })}\n          >\n            <Tooltip direction=\"top\" offset={[0, -10]} permanent={true}>\n              <b>{device}</b>\n            </Tooltip>\n          </CircleMarker>,\n        );\n      }\n    });\n\n    // Track Line\n    const selectedDevice = this.props.selectedDevice;\n    let pts = [];\n    if (selectedDevice.device && selectedDevice.day && selectedDevice.hour) {\n      try {\n        const data =\n          this.props.oada[this.props.connection.connection_id].bookmarks\n            .isoblue[\"device-index\"][selectedDevice.device][\"location\"][\n            \"day-index\"\n          ][selectedDevice.day][\"hour-index\"][selectedDevice.hour][\"data\"] ||\n          {};\n        Object.keys(data).forEach(key => {\n          if (\n            !isNaN(data[key].location.lat) &&\n            !isNaN(data[key].location.lng)\n          ) {\n            pts.push(\n              <CircleMarker\n                key={key}\n                center={[data[key].location.lat, data[key].location.lng]}\n                radius={1}\n                color={\"#ffffff\"}\n              />,\n            );\n          }\n        });\n      } catch {\n        console.log(\"failed to get location points.\");\n      }\n    }\n\n    return (\n      <div className={classes.map}>\n        <Map\n          center={[this.props.mapCenter.lat, this.props.mapCenter.lng]}\n          zoom={15}\n          maxZoom={18}\n          preferCanvas={true}\n          style={{ height: \"100%\", width: \"100%\", position: \"relative\" }}\n        >\n          <TileLayer\n            attribution=\"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\"\n            url=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\n          />\n          <div>{pts}</div>\n          {markers}\n        </Map>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  {\n    mapCenter: state`mapCenter`,\n    devices: state`devices`,\n    connection: state`connection`,\n    oada: state`oada`,\n    selectedDevice: state`selectedDevice`,\n    selectDevice: sequences`selectDevice`,\n  },\n  withStyles(styles, { withTheme: true })(MapComponent),\n);\n","import React from \"react\";\nimport { state, sequences } from \"cerebral\";\nimport { connect } from \"@cerebral/react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { AppBar, Typography, Modal } from \"@material-ui/core\";\n\n// Components\nimport AppBarComponent from \"./AppBar\";\nimport DrawerComponent from \"./Drawer\";\nimport Map from \"./Map\";\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100vh\",\n    zIndex: 1,\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  content: {\n    flexGrow: 1,\n  },\n  toolbar: theme.mixins.toolbar,\n});\n\nclass AppComponent extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <AppBar position=\"absolute\" className={classes.appBar}>\n          <AppBarComponent />\n        </AppBar>\n        <DrawerComponent />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          <Map />\n        </main>\n        <Modal\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={this.props.modalOverlay}\n        >\n          <div />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst App = connect(\n  { modalOverlay: state`modalOverlay` },\n  withStyles(styles, { withTheme: true })(AppComponent),\n);\n\nexport default App;\n","export const masterTree = {\n  bookmarks: {\n    _type: \"application/vnd.oada.bookmarks.1+json\",\n    _rev: 0,\n    isoblue: {\n      _type: \"application/vnd.oada.isoblue.1+json\",\n      _rev: 0,\n      \"device-index\": {\n        \"*\": {\n          _type: \"application/vnd.oada.isoblue.device.1+json\",\n          _rev: 0,\n          \"*\": {\n            _type: \"application/vnd.oada.isoblue.dataset.1+json\",\n            _rev: 0,\n            \"day-index\": {\n              \"*\": {\n                _type: \"application/vnd.oada.isoblue.day.1+json\",\n                _rev: 0,\n                \"hour-index\": {\n                  \"*\": {\n                    _type: \"application/vnd.oada.isoblue.hour.1+json\",\n                  },\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n};\n\nexport const hourTree = {\n  bookmarks: {\n    _type: \"applications/vnd.oada.bookmarks.1+json\",\n    _rev: 0,\n    isoblue: {\n      _type: \"applications/vnd.oada.isoblue.1+json\",\n      _rev: 0,\n      \"device-index\": {\n        \"*\": {\n          _type: \"applications/vnd.oada.isoblue.device.1+json\",\n          _rev: 0,\n          \"*\": {\n            _type: \"application/vnd.oada.isoblue.dataset.1+json\",\n            _rev: 0,\n            \"day-index\": {\n              \"*\": {\n                _type: \"applications/vnd.oada.isoblue.day.1+json\",\n                _rev: 0,\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n};\n\nexport const dayTree = {\n  bookmarks: {\n    _type: \"applications/vnd.oada.bookmarks.1+json\",\n    _rev: 0,\n    isoblue: {\n      _type: \"applications/vnd.oada.isoblue.1+json\",\n      _rev: 0,\n      \"device-index\": {\n        \"*\": {\n          _type: \"applications/vnd.oada.isoblue.device.1+json\",\n          _rev: 0,\n          \"*\": {\n            _type: \"application/vnd.oada.isoblue.dataset.1+json\",\n            _rev: 0,\n          },\n        },\n      },\n    },\n  },\n};\n\nexport const deviceTree = {\n  bookmarks: {\n    _type: \"applications/vnd.oada.bookmarks.1+json\",\n    _rev: 0,\n    isoblue: {\n      _type: \"applications/vnd.oada.isoblue.1+json\",\n      _rev: 0,\n      \"device-index\": {},\n    },\n  },\n};\n","import { state, props, sequences } from \"cerebral\";\nimport { set, when, toggle, unset } from \"cerebral/factories\";\nimport _ from \"lodash\";\nimport * as oadatrees from \"./oadatrees\";\n\nexport const initialize = () => {};\n\nexport const setConnectionArgs = () => {\n  return {\n    domain: \"https://cloudradio33.ecn.purdue.edu\",\n    token: \"abc\",\n    cache: false,\n  };\n};\n\nexport const setDeviceListRequest = ({ get }) => {\n  return {\n    requests: [\n      {\n        path: \"/bookmarks/isoblue\",\n        tree: oadatrees.deviceTree,\n        watch: { signals: [\"handleNewDevice\"] },\n      },\n    ],\n  };\n};\n\nexport const setDayListRequest = ({ get }) => {\n  const device = get(props`device`);\n\n  return {\n    requests: [\n      {\n        path: `/bookmarks/isoblue/device-index/${device}/location`,\n        tree: oadatrees.dayTree,\n        watch: { signals: [\"handleDayUpdate\"], payload: { device } },\n      },\n    ],\n  };\n};\n\nexport const setHourListRequest = ({ get }) => {\n  const device = get(props`device`);\n  const day = get(props`day`);\n\n  return {\n    requests: [\n      {\n        path: `/bookmarks/isoblue/device-index/${device}/location/day-index/${day}`,\n        tree: oadatrees.hourTree,\n        //watch: { signals: [\"handleHourUpdate\"], payload: { device } },\n      },\n    ],\n  };\n};\n\nexport const setLocationDataRequest = ({ get }) => {\n  const device = get(props`device`);\n  const day = get(props`day`);\n  const hour = get(props`hour`);\n\n  return {\n    requests: [\n      {\n        path: `/bookmarks/isoblue/device-index/${device}/location/day-index/${day}/hour-index/${hour}`,\n        tree: oadatrees.masterTree,\n        watch: { signals: [\"handleDeviceLocationUpdate\"], payload: { device } },\n      },\n    ],\n  };\n};\n\nexport const getMostRecentDay = ({ get }) => {\n  const device = get(props`device`);\n  const connection_id = get(state`connection.connection_id`);\n  if (!device || !connection_id) {\n    throw new Error(\"Missing parameters\");\n  }\n\n  const day_index = get(\n    state`oada.${connection_id}.bookmarks.isoblue.device-index.${device}.location.day-index`,\n  );\n\n  // find the most recent day\n  const date_list = Object.keys(day_index);\n  if (date_list.length === 0) {\n    return {};\n  }\n  const last_date = _.maxBy(date_list, function(o) {\n    return new Date(o);\n  });\n  return { day: last_date };\n};\n\nexport const getMostRecentHour = ({ get }) => {\n  const device = get(props`device`);\n  const connection_id = get(state`connection.connection_id`);\n  const day = get(props`day`);\n  if (!device || !connection_id || !day) {\n    throw new Error(\"Missing parameters\");\n  }\n\n  const hour_index = get(\n    state`oada.${connection_id}.bookmarks.isoblue.device-index.${device}.location.day-index.${day}.hour-index`,\n  );\n\n  // find the most recent hour\n  const hour_list = Object.keys(hour_index);\n  if (hour_list.length === 0) {\n    return {};\n  }\n  const last_hour = _.max(Object.keys(hour_index || {}).map(Number));\n  return { hour: last_hour.toString() };\n};\n\nexport const getMostRecentLocation = ({ get }) => {\n  const device = get(props`device`);\n  const connection_id = get(state`connection.connection_id`);\n  const day = get(props`day`);\n  const hour = get(props`hour`);\n  if (!device || !connection_id || !day || !hour) {\n    throw new Error(\"Missing parameters\");\n  }\n  const hour_dataset = get(\n    state`oada.${connection_id}.bookmarks.isoblue.device-index.${device}.location.day-index.${day}.hour-index.${hour}.data`,\n  );\n\n  const latest_data_point = Object.values(hour_dataset || {}).reduce(\n    (latest, data_point) => {\n      return latest.time.value > data_point.time.value\n        ? latest\n        : {\n            time: data_point.time.value,\n            lat: data_point.location.lat,\n            lng: data_point.location.lng,\n          };\n    },\n    { time: 0, lat: 0, lng: 0 },\n  );\n\n  return { latest_data_point };\n};\n\nexport const updateDeviceListState = ({ get }) => {\n  const connection_id = get(state`connection.connection_id`);\n  const devices =\n    get(state`oada.${connection_id}.bookmarks.isoblue.device-index`) || {};\n  if (!connection_id) {\n    throw new Error(\"Missing parameters\");\n  }\n\n  let device_state = get(state`devices`);\n\n  for (const device_name in devices) {\n    if (!(device_name in device_state)) {\n      device_state[device_name] = {\n        sync: false,\n        watchPath: null,\n        location: { lat: null, lng: null },\n      };\n    }\n  }\n\n  return { devices: device_state };\n};\n","import { state, props } from \"cerebral\";\nimport { set, when, toggle, unset } from \"cerebral/factories\";\nimport oadaModule from \"@oada/cerebral-module\";\nimport * as actions from \"./actions\";\nimport * as oadatrees from \"./oadatrees\";\n\nconst oada = oadaModule.sequences;\n\nexport const initialize = actions.initialize;\n\nexport const connect = [\n  actions.setConnectionArgs,\n  oada.connect,\n  //set(state`connection`,{}),\n  set(state`connection.connection_id`, props`connection_id`),\n\n  actions.setDeviceListRequest,\n  oada.get,\n  actions.updateDeviceListState,\n  set(state`devices`, props`devices`),\n  set(state`modalOverlay`, false),\n];\n\nexport const handleNewDevice = [\n  actions.updateDeviceListState,\n  set(state`devices`, props`devices`),\n];\n\nexport const handleDeviceLocationUpdate = [\n  actions.getMostRecentDay,\n  actions.getMostRecentHour,\n  actions.getMostRecentLocation,\n  set(\n    state`devices.${props`device`}.location.lng`,\n    props`latest_data_point.lng`,\n  ),\n  set(\n    state`devices.${props`device`}.location.lat`,\n    props`latest_data_point.lat`,\n  ),\n];\n\nexport const handleDayUpdate = [\n  set(props`connection_id`, state`connection.connection_id`),\n  actions.getMostRecentDay,\n\n  actions.setHourListRequest,\n  oada.get,\n  actions.getMostRecentHour,\n\n  actions.setLocationDataRequest,\n  oada.get,\n  actions.getMostRecentLocation,\n  set(\n    state`devices.${props`device`}.location.lng`,\n    props`latest_data_point.lng`,\n  ),\n  set(\n    state`devices.${props`device`}.location.lat`,\n    props`latest_data_point.lat`,\n  ),\n];\n\nexport const toggleDrawer = toggle(state`components.drawer`);\n\nexport const selectDevice = [\n  set(state`modalOverlay`, true),\n  set(props`connection_id`, state`connection.connection_id`),\n\n  when(state`devices.${props`device`}.sync`),\n  {\n    true: [\n      actions.getMostRecentDay,\n      actions.getMostRecentHour,\n      actions.getMostRecentLocation,\n    ],\n    false: [\n      actions.setDayListRequest,\n      oada.get,\n      actions.getMostRecentDay,\n\n      actions.setHourListRequest,\n      oada.get,\n      actions.getMostRecentHour,\n\n      actions.setLocationDataRequest,\n      oada.get,\n      actions.getMostRecentLocation,\n    ],\n  },\n  set(\n    state`devices.${props`device`}.location.lng`,\n    props`latest_data_point.lng`,\n  ),\n  set(\n    state`devices.${props`device`}.location.lat`,\n    props`latest_data_point.lat`,\n  ),\n  set(state`devices.${props`device`}.sync`, true),\n  set(state`mapCenter.lat`, props`latest_data_point.lat`),\n  set(state`mapCenter.lng`, props`latest_data_point.lng`),\n  set(state`selectedDevice.device`, props`device`),\n  set(state`selectedDevice.day`, props`day`),\n  set(state`selectedDevice.hour`, props`hour`),\n  set(state`modalOverlay`, false),\n];\n\nexport const unselectDevice = [\n  set(state`selectedDevice.device`, null),\n  set(state`selectedDevice.day`, null),\n  set(state`selectedDevice.hour`, null),\n];\n\nexport const selectDay = [\n  set(state`modalOverlay`, true),\n  set(props`connection_id`, state`connection.connection_id`),\n  set(props`device`, state`selectedDevice.device`),\n  set(state`selectedDevice.day`, props`day`),\n  actions.setHourListRequest,\n  oada.get,\n  set(state`modalOverlay`, false),\n];\nexport const selectHour = [\n  set(state`modalOverlay`, true),\n  set(props`connection_id`, state`connection.connection_id`),\n  set(props`device`, state`selectedDevice.device`),\n  set(props`day`, state`selectedDevice.day`),\n  set(state`selectedDevice.hour`, props`hour`),\n  actions.setLocationDataRequest,\n  oada.get,\n  set(state`modalOverlay`, false),\n];\n\nexport const toggleDeviceSync = [\n  set(state`modalOverlay`, true),\n  when(state`devices.${props`device`}.sync`),\n  {\n    true: [set(state`devices.${props`device`}.sync`, false)],\n    false: [\n      set(props`connection_id`, state`connection.connection_id`),\n\n      actions.setDayListRequest,\n      oada.get,\n      actions.getMostRecentDay,\n\n      actions.setHourListRequest,\n      oada.get,\n      actions.getMostRecentHour,\n\n      actions.setLocationDataRequest,\n      oada.get,\n      actions.getMostRecentLocation,\n      set(\n        state`devices.${props`device`}.location.lng`,\n        props`latest_data_point.lng`,\n      ),\n      set(\n        state`devices.${props`device`}.location.lat`,\n        props`latest_data_point.lat`,\n      ),\n      set(state`mapCenter.lat`, props`latest_data_point.lat`),\n      set(state`mapCenter.lng`, props`latest_data_point.lng`),\n      set(state`devices.${props`device`}.sync`, true),\n    ],\n  },\n  set(state`modalOverlay`, false),\n];\n","import { state } from \"cerebral\";\n\nexport default {\n  mapCenter: { lat: 40.428641, lng: -86.913783 },\n  connection: {},\n  devices: {},\n  components: { drawer: false },\n  selectedDevice: { device: null, day: null, hour: null },\n  modalOverlay: true,\n};\n","import App from \"cerebral\";\nimport * as sequences from \"./sequences\";\n//import * as providers from \"./providers\";\nimport state from \"./state\";\nimport DevTools from \"cerebral/devtools\";\nimport oadaModule from \"@oada/cerebral-module\";\n\nexport default App(\n  ({ app }) => {\n    app.on(\"initialized\", () => {\n      app.getSequence(\"connect\")();\n    });\n    return {\n      modules: {\n        oada: oadaModule,\n      },\n      state,\n      sequences,\n    };\n  },\n  {\n    devtools:\n      process.env.NODE_ENV === \"production\"\n        ? null\n        : DevTools({\n            host: \"localhost:8787\",\n          }),\n  },\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Container } from \"@cerebral/react\";\n//import \"./index.css\";\nimport ISOBlueAppComponent from \"./components/App\";\nimport app from \"./app\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <Container app={app}>\n    <ISOBlueAppComponent />\n  </Container>,\n  document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}