(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1008:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"toggleDrawerOpen",function(){return Jt});var r={};n.r(r),n.d(r,"storeUserLocation",function(){return _t}),n.d(r,"centerOnUser",function(){return zt}),n.d(r,"centerOnUnit",function(){return At});var c={};n.r(c),n.d(c,"updateSnapshot",function(){return en}),n.d(c,"createSnapshots",function(){return tn});var i={};n.r(i),n.d(i,"handleDeviceUpdate",function(){return ln}),n.d(i,"init",function(){return pn}),n.d(i,"getHour",function(){return dn});var s={};n.r(s),n.d(s,"setDefaultDate",function(){return Sn}),n.d(s,"setDate",function(){return Dn}),n.d(s,"setHour",function(){return Mn}),n.d(s,"setDefaultHour",function(){return Cn}),n.d(s,"setMeasurement",function(){return Nn}),n.d(s,"selectUnit",function(){return Ln}),n.d(s,"toggleMode",function(){return Rn});var o={};n.r(o),n.d(o,"init",function(){return Hn});var u=n(1),l=n.n(u),p=n(53),d=n(37),b=n(6),f=n(41),m=n(42),O=n(44),h=n(43),j=n(45),g=n(33),v=n(4),y=n(449),E=n.n(y),k=n(251),w=n(252),U=n.n(w),I=n(248),x=n.n(I),S=n(428),D=n.n(S),M=n(427),C=n.n(M),N=n(429),L=n.n(N);function R(){var e=Object(b.a)(["session.toggleDrawerOpen"]);return R=function(){return e},e}function W(){var e=Object(b.a)(["map.centerOnUser"]);return W=function(){return e},e}function G(){var e=Object(b.a)(["map.userLocationAvailable"]);return G=function(){return e},e}var X=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.classes;return e=this.props.userLocationAvailable?l.a.createElement(U.a,{onClick:function(){return t.props.centerOnUser({})}},l.a.createElement(C.a,{className:n.icon})):null,l.a.createElement(D.a,null,l.a.createElement(U.a,{color:"inherit","aria-label":"Open Drawer",onClick:this.props.toggleDrawerOpen},l.a.createElement(L.a,{className:n.icon})),l.a.createElement(x.a,{variant:"title",color:"inherit",className:n.flex},"ISOBlueApp [1.0.0]"),e)}}]),t}(l.a.Component),J=Object(g.connect)({userLocationAvailable:Object(v.state)(G()),centerOnUser:Object(v.signal)(W()),toggleDrawerOpen:Object(v.signal)(R())},Object(d.withStyles)(function(e){var t;return{flex:{flex:1},icon:(t={color:"#FFFFFF"},Object(k.a)(t,e.breakpoints.up("xs"),{width:5*e.spacing.unit,height:5*e.spacing.unit,marginRight:e.spacing.unit}),Object(k.a)(t,e.breakpoints.down("xs"),{width:4*e.spacing.unit,height:4*e.spacing.unit,marginRight:e.spacing.unit}),t)}})(X)),V=n(1013),T=n(1017),Z=n(1019),F=(n(547),n(22)),H=n.n(F),Y=n(178),_=n.n(Y),z=n(1011);function A(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return A=function(){return e},e}function q(){var e=Object(b.a)(["diagnostics.hour"]);return q=function(){return e},e}function Q(){var e=Object(b.a)(["diagnostics.date"]);return Q=function(){return e},e}function B(){var e=Object(b.a)(["oada"]);return B=function(){return e},e}function P(){var e=Object(b.a)(["data"]);return P=function(){return e},e}function K(){var e=Object(b.a)(["snapshots"]);return K=function(){return e},e}var $=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.connection_id;if(!this.props.data.ready)return null;var n=this.props.oada[t].bookmarks.isoblue["device-index"]||{},a=[];return H.a.forEach(n,function(t,n){var r=t["day-index"];if(n===e.props.selectedUnit);else if("Healthy"===e.props.snapshots[n].health||"Sick"===e.props.snapshots[n].health){var c=[],i=Math.round((new Date).getTime()/1e3),s=Object.keys(r).sort(function(e,t){return new Date(t)-new Date(e)})[0],o=Object.keys(r[s]["hour-index"]),u=H.a.max(o),l=H.a.max(H.a.remove(o,function(e){return e!==u})),p=Object.keys(r[s]["hour-index"][u].gps||{}),d=l?Object.keys(r[s]["hour-index"][l].gps||{}):[];H.a.forEach(p,function(e,t){var n=r[s]["hour-index"][u].gps[e];i-e<=900&&n.lat&&n.lng&&c.push([n.lat,n.lng])}),H.a.forEach(d||[],function(e){var t=r[s]["hour-index"][l].gps[e];i-e<=900&&t.lat&&t.lng&&c.push([t.lat,t.lng])}),a.push(c)}}),l.a.createElement("div",null,a.map(function(e){return l.a.createElement(z.a,{key:_.a.v4(),positions:e,color:"#ffffff"})}))}}]),t}(l.a.Component),ee=Object(g.connect)({snapshots:Object(v.state)(K()),data:Object(v.state)(P()),oada:Object(v.state)(B()),date:Object(v.state)(Q()),hour:Object(v.state)(q()),selectedUnit:Object(v.state)(A())},Object(d.withStyles)(function(e){return{}},{withTheme:!0})($)),te=n(1012),ne=n(1018);function ae(){var e=Object(b.a)(["diagnostics.selectUnit"]);return ae=function(){return e},e}function re(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return re=function(){return e},e}function ce(){var e=Object(b.a)(["diagnostics.hour"]);return ce=function(){return e},e}function ie(){var e=Object(b.a)(["diagnostics.date"]);return ie=function(){return e},e}function se(){var e=Object(b.a)(["data"]);return se=function(){return e},e}function oe(){var e=Object(b.a)(["snapshots"]);return oe=function(){return e},e}var ue=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[];if(this.props.selectedUnit){var n=H.a.max(Object.keys(this.props.data[this.props.selectedUnit][this.props.date][this.props.hour].gps||{}));if(n){var a=this.props.data[this.props.selectedUnit][this.props.date][this.props.hour].gps[n];a.lat&&a.lng&&t.push(l.a.createElement(te.a,{ref:this.props.selectedUnit,key:this.props.selectedUnit,center:[a.lat,a.lng],color:"#ffffff",fillColor:function(){switch(e.props.snapshots[e.props.selectedUnit].health){case"Healthy":return"#008000";case"Sick":return"#ffbf00";case"Down":default:return"#707070"}}(),fillOpacity:1,radius:12,zIndexOffset:-10,onClick:function(t){return e.props.selectUnit({})}},l.a.createElement(ne.a,{direction:"top",offset:[0,-10]},l.a.createElement("b",null,"Unit: ",this.props.selectedUnit),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("b",null,this.props.snapshots[this.props.selectedUnit].health)))))}}else H.a.forEach(Object.keys(this.props.snapshots)||{},function(n){var a=e.props.snapshots[n].location;a&&a.lat&&a.lng&&t.push(l.a.createElement(te.a,{ref:function(t){e.unit=t},key:n,center:[e.props.snapshots[n].location.lat,e.props.snapshots[n].location.lng],color:"#ffffff",fillColor:function(){switch(e.props.snapshots[n].health){case"Healthy":return"#008000";case"Sick":return"#ffbf00";case"Down":default:return"#707070"}}(),fillOpacity:1,radius:12,zIndexOffset:1,onClick:function(t){return e.props.selectUnit({unit:n})}},l.a.createElement(ne.a,{direction:"top",offset:[0,-10]},l.a.createElement("b",null,"Unit: ",n),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("b",null,e.props.snapshots[n].health)))))});return l.a.createElement("div",null,t)}}]),t}(l.a.Component),le=Object(g.connect)({snapshots:Object(v.state)(oe()),data:Object(v.state)(se()),date:Object(v.state)(ie()),hour:Object(v.state)(ce()),selectedUnit:Object(v.state)(re()),selectUnit:Object(v.signal)(ae())},Object(d.withStyles)(function(e){return{}},{withTheme:!0})(ue));function pe(){var e=Object(b.a)(["diagnostics.selectUnit"]);return pe=function(){return e},e}function de(){var e=Object(b.a)(["map.storeUserLocation"]);return de=function(){return e},e}function be(){var e=Object(b.a)(["snapshots"]);return be=function(){return e},e}function fe(){var e=Object(b.a)(["map.userLocationAvailable"]);return fe=function(){return e},e}function me(){var e=Object(b.a)(["map.userLocation"]);return me=function(){return e},e}function Oe(){var e=Object(b.a)(["map.targetCenter"]);return Oe=function(){return e},e}var he=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.refs.map.leafletElement.locate()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=[];return this.props.userLocationAvailable&&n.push(l.a.createElement(V.a,{key:"user",position:[this.props.userLocation.lat,this.props.userLocation.lng]},"zIndexOffset=",1)),l.a.createElement("div",{className:t.map},l.a.createElement(T.a,{dragging:!0,center:[this.props.targetCenter.lat,this.props.targetCenter.lng],ref:"map",zoom:18,onlocationfound:function(t){return e.props.storeUserLocation({lat:t.latlng.lat,lng:t.latlng.lng})}},l.a.createElement(Z.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),l.a.createElement(le,null),l.a.createElement(ee,null),n))}}]),t}(l.a.Component),je=Object(g.connect)({targetCenter:Object(v.state)(Oe()),userLocation:Object(v.state)(me()),userLocationAvailable:Object(v.state)(fe()),snapshots:Object(v.state)(be()),storeUserLocation:Object(v.signal)(de()),selectUnit:Object(v.signal)(pe())},Object(d.withStyles)(function(e){return{map:{position:"relative",display:"flex",width:"100%",height:"calc(100% - 56px)"}}},{withTheme:!0})(he)),ge=n(1016),ve=n(452),ye=n(1014),Ee=n(442),ke=n(443),we=n(192),Ue=n(1015);function Ie(){var e=Object(b.a)(["data"]);return Ie=function(){return e},e}function xe(){var e=Object(b.a)(["diagnostics.measurement"]);return xe=function(){return e},e}function Se(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return Se=function(){return e},e}function De(){var e=Object(b.a)(["diagnostics.hour"]);return De=function(){return e},e}function Me(){var e=Object(b.a)(["diagnostics.date"]);return Me=function(){return e},e}var Ce=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e;this.props.selectedUnit&&this.props.date&&this.props.hour&&(e=this.props.data[this.props.selectedUnit][this.props.date][this.props.hour]);var t,n=[];return"Latency"===this.props.measurement&&e?(H.a.forEach(Object.values(e.heartbeats||{}),function(e){e.latency=e.recTime-e.genTime,e.time=new Date(1e3*e.genTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"}),n.push(e)}),t=l.a.createElement(ge.a,{data:n,margin:{top:20,right:30,left:0,bottom:80}},l.a.createElement(ve.a,{type:"step",isAnimationActive:!1,dataKey:"latency",stroke:"#8884d8"}),l.a.createElement(ye.a,{stroke:"#ccc",strokeDasharray:"5 5"}),l.a.createElement(Ee.a,{dataKey:"time"}),l.a.createElement(ke.a,{dataKey:"latency"}),l.a.createElement(we.a,null))):"Wifi RSSI"===this.props.measurement&&e?(H.a.forEach(Object.values(e.heartbeats||{}),function(e){H.a.forEach(e.interfaces,function(t){"wifi"===t.type&&(t.time=new Date(1e3*e.genTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"}),n.push(t))})}),t=l.a.createElement(ge.a,{data:n,margin:{top:20,right:30,left:0,bottom:80}},l.a.createElement(ve.a,{type:"step",isAnimationActive:!1,dataKey:"rssi",stroke:"#8884d8"}),l.a.createElement(ye.a,{stroke:"#ccc",strokeDasharray:"5 5"}),l.a.createElement(Ee.a,{dataKey:"time"}),l.a.createElement(ke.a,{dataKey:"rssi"}),l.a.createElement(we.a,null))):"Cellular RSSI"===this.props.measurement&&e?(H.a.forEach(Object.values(e.heartbeats||{}),function(e){H.a.forEach(e.interfaces,function(t){"cellular"===t.type&&(t.time=new Date(1e3*e.genTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"}),n.push(t))})}),t=l.a.createElement(ge.a,{data:n,margin:{top:20,right:30,left:0,bottom:80}},l.a.createElement(ve.a,{type:"step",isAnimationActive:!1,dataKey:"rssi",stroke:"#8884d8"}),l.a.createElement(ye.a,{stroke:"#ccc",strokeDasharray:"5 5"}),l.a.createElement(Ee.a,{dataKey:"time"}),l.a.createElement(ke.a,{dataKey:"rssi"}),l.a.createElement(we.a,null))):t=l.a.createElement(ge.a,{margin:{top:20,right:30,left:0,bottom:80}}),l.a.createElement(Ue.a,{width:"100%",height:"100%"},t)}}]),t}(l.a.Component),Ne=Object(g.connect)({date:Object(v.state)(Me()),hour:Object(v.state)(De()),selectedUnit:Object(v.state)(Se()),measurement:Object(v.state)(xe()),data:Object(v.state)(Ie())},Object(d.withStyles)(function(e){return{}},{withTheme:!0})(Ce));function Le(){var e=Object(b.a)(["diagnostics.mode"]);return Le=function(){return e},e}var Re=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return"map"===this.props.mode?l.a.createElement(je,null):l.a.createElement(Ne,null)}}]),t}(l.a.Component),We=Object(g.connect)({mode:Object(v.state)(Le())},Re),Ge=n(448),Xe=n.n(Ge),Je=n(126),Ve=n.n(Je),Te=n(105),Ze=n.n(Te),Fe=n(52),He=n.n(Fe),Ye=n(445),_e=n.n(Ye),ze=n(49),Ae=n.n(ze),qe=n(446),Qe=n.n(qe),Be=n(447),Pe=n.n(Be),Ke=n(256),$e=n.n(Ke);function et(){var e=Object(b.a)(["session.setDate"]);return et=function(){return e},e}function tt(){var e=Object(b.a)(["diagnostics.selectUnit"]);return tt=function(){return e},e}function nt(){var e=Object(b.a)(["session.date"]);return nt=function(){return e},e}function at(){var e=Object(b.a)(["snapshots"]);return at=function(){return e},e}function rt(){var e=Object(b.a)(["data"]);return rt=function(){return e},e}var ct=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.classes;return e=Object.keys(this.props.snapshots).length>0?l.a.createElement(Ze.a,{className:n.list,component:"nav"},Object.keys(this.props.snapshots).map(function(e){return l.a.createElement(He.a,{button:!0,key:"-".concat(e),onClick:function(){return t.props.selectUnit({unit:e})}},l.a.createElement(Ae.a,{primary:e}),l.a.createElement(_e.a,null,function(){switch(t.props.snapshots[e].health){case"Healthy":return l.a.createElement(Qe.a,{className:n.healthy});case"Sick":return l.a.createElement(Pe.a,{className:n.sick});case"Down":default:return l.a.createElement($e.a,null)}}()))})):l.a.createElement(Ze.a,{className:n.list,component:"nav"}),l.a.createElement(Ze.a,null,l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"My ISOBlues:"})),e,l.a.createElement(Ve.a,null))}}]),t}(l.a.Component),it=Object(g.connect)({data:Object(v.state)(rt()),snapshots:Object(v.state)(at()),date:Object(v.state)(nt()),selectUnit:Object(v.signal)(tt()),setDate:Object(v.signal)(et())},Object(d.withStyles)(function(e){return{list:{width:"90%",backgroundColor:e.palette.background.paper,overflow:"auto",height:300,margin:1.5*e.spacing.unit},textField:{margin:1.5*e.spacing.unit},healthy:{color:"#008000"},sick:{color:"#ffbf00"},down:{color:"#ff0000"}}})(ct)),st=n(257),ot=n.n(st),ut=n(189),lt=n.n(ut),pt=n(190),dt=n.n(pt);function bt(){var e=Object(b.a)(["diagnostics.toggleMode"]);return bt=function(){return e},e}function ft(){var e=Object(b.a)(["diagnostics.setMeasurement"]);return ft=function(){return e},e}function mt(){var e=Object(b.a)(["diagnostics.setHour"]);return mt=function(){return e},e}function Ot(){var e=Object(b.a)(["diagnostics.setDate"]);return Ot=function(){return e},e}function ht(){var e=Object(b.a)(["diagnostics.selectUnit"]);return ht=function(){return e},e}function jt(){var e=Object(b.a)(["diagnostics.mode"]);return jt=function(){return e},e}function gt(){var e=Object(b.a)(["data"]);return gt=function(){return e},e}function vt(){var e=Object(b.a)(["snapshots"]);return vt=function(){return e},e}function yt(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return yt=function(){return e},e}function Et(){var e=Object(b.a)(["diagnostics.measurement"]);return Et=function(){return e},e}function kt(){var e=Object(b.a)(["diagnostics.hour"]);return kt=function(){return e},e}function wt(){var e=Object(b.a)(["diagnostics.date"]);return wt=function(){return e},e}var Ut=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center"},l.a.createElement(ot.a,{onClick:function(){return t.props.toggleMode({})},variant:"contained"},"map"===this.props.mode?"Graphical Data":"Map Data")));e="map"===this.props.mode?["GPS"]:["Latency","Wifi RSSI","Cellular RSSI"];var a=l.a.createElement(lt.a,{value:this.props.measurement,renderValue:function(e){return"".concat(e)},onChange:function(e){return t.props.setMeasurement({measurement:e.target.value})}},e.map(function(e){return l.a.createElement(dt.a,{key:e,value:e},e)})),r=l.a.createElement(lt.a,{value:this.props.date,renderValue:function(e){return"".concat(e)},onChange:function(e){return t.props.setDate({date:e.target.value})}},Object.keys(this.props.data[this.props.selectedUnit]).map(function(e){return l.a.createElement(dt.a,{key:e,value:e},e)}),";"),c=l.a.createElement(lt.a,{value:this.props.hour,renderValue:function(e){return"".concat(e)},onChange:function(e){return t.props.setHour({hour:e.target.value})}},Object.keys(this.props.data[this.props.selectedUnit][this.props.date]).map(function(e){return l.a.createElement(dt.a,{key:e,value:e},e)}),";");return l.a.createElement(Ze.a,null,l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"Selected Unit:"})),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:this.props.selectedUnit})),l.a.createElement(Ve.a,null),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"Live Snapshot:"})),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"Quick Health:"}),l.a.createElement(Ae.a,{align:"center",primary:this.props.snapshots[this.props.selectedUnit].health})),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"Last Report:"}),l.a.createElement(Ae.a,{align:"center",primary:"NA"===this.props.snapshots[this.props.selectedUnit].lastReport?"NA":this.props.snapshots[this.props.selectedUnit].lastReport+" min"})),l.a.createElement(Ve.a,null),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center",primary:"Available Data:"})),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center"},a)),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center"},r)),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center"},c)),n,l.a.createElement(Ve.a,null),l.a.createElement(He.a,null,l.a.createElement(Ae.a,{align:"center"},l.a.createElement(ot.a,{variant:"contained",onClick:function(){return t.props.selectUnit({})}},"Back to Main"))))}}]),t}(l.a.Component),It=Object(g.connect)({date:Object(v.state)(wt()),hour:Object(v.state)(kt()),measurement:Object(v.state)(Et()),selectedUnit:Object(v.state)(yt()),snapshots:Object(v.state)(vt()),data:Object(v.state)(gt()),mode:Object(v.state)(jt()),selectUnit:Object(v.signal)(ht()),setDate:Object(v.signal)(Ot()),setHour:Object(v.signal)(mt()),setMeasurement:Object(v.signal)(ft()),toggleMode:Object(v.signal)(bt())},Object(d.withStyles)(function(e){return{}})(Ut));function xt(){var e=Object(b.a)(["session.toggleDrawerOpen"]);return xt=function(){return e},e}function St(){var e=Object(b.a)(["session.drawerOpen"]);return St=function(){return e},e}function Dt(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return Dt=function(){return e},e}var Mt=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this.props.classes;return e=this.props.selectedUnit?l.a.createElement(It,null):l.a.createElement(it,null),l.a.createElement(Xe.a,{open:this.props.drawerOpen,onClose:this.props.toggleDrawerOpen,classes:{paper:t.drawerPaper}},l.a.createElement("div",{className:t.toolbar}),e)}}]),t}(l.a.Component),Ct=Object(g.connect)({selectedUnit:Object(v.state)(Dt()),drawerOpen:Object(v.state)(St()),toggleDrawerOpen:Object(v.signal)(xt())},Object(d.withStyles)(function(e){return{drawerPaper:{position:"relative",width:240,backgroundColor:"#eeeeee"},toolbar:e.mixins.toolbar}})(Mt));function Nt(){var e=Object(b.a)(["init"]);return Nt=function(){return e},e}var Lt=function(e){function t(){return Object(f.a)(this,t),Object(O.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.init({})}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(E.a,{position:"absolute",className:e.appBar},l.a.createElement(J,null)),l.a.createElement(Ct,null),l.a.createElement("main",{className:e.content},l.a.createElement("div",{className:e.toolbar}),l.a.createElement(We,null)))}}]),t}(l.a.Component),Rt=Object(g.connect)({init:Object(v.signal)(Nt())},Object(d.withStyles)(function(e){return{root:{flexGrow:1,height:"100vh",zIndex:1,overflow:"hidden",position:"relative",display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},content:{flexGrow:1},toolbar:e.mixins.toolbar}},{withTheme:!0})(Lt)),Wt=n(16),Gt=n(24);function Xt(){var e=Object(b.a)(["session.drawerOpen"]);return Xt=function(){return e},e}var Jt=Object(Wt.sequence)("toggleDrawerOpen",[Object(Gt.toggle)(Object(v.state)(Xt()))]),Vt=Object(Wt.Module)({state:{drawerOpen:!0},signals:a});function Tt(){var e=Object(b.a)(["map.targetCenter"]);return Tt=function(){return e},e}function Zt(){var e=Object(b.a)(["map.userLocation"]);return Zt=function(){return e},e}function Ft(){var e=Object(b.a)(["map.targetCenter"]);return Ft=function(){return e},e}function Ht(){var e=Object(b.a)(["map.targetCenter"]);return Ht=function(){return e},e}function Yt(){var e=Object(b.a)(["map.userLocationAvailable"]);return Yt=function(){return e},e}var _t=Object(Wt.sequence)("storeUserLocation",[function(e){var t=e.state,n=e.props;return t.set("map.userLocation",{lat:n.lat,lng:n.lng})},Object(Gt.set)(Object(v.state)(Yt()),!0)]),zt=Object(Wt.sequence)("centerOnUser",[Object(Gt.set)(Object(v.state)(Ht()),{lat:40.428641,lng:-86.913783}),Object(Gt.debounce)(1),{continue:[Object(Gt.set)(Object(v.state)(Ft()),Object(v.state)(Zt()))],discard:[]}]),At=Object(Wt.sequence)("centerOnUnit",[Object(Gt.set)(Object(v.state)(Tt()),{lat:40.428641,lng:-86.913783}),Object(Gt.debounce)(1),{continue:[function(e){var t=e.state,n=(e.props,t.get("diagnostics.selectedUnit")),a=t.get("diagnostics.date"),r=t.get("diagnostics.hour");if(n&&a&&r){var c=H.a.max(Object.keys(t.get("data.".concat(n,".").concat(a,".").concat(r,".gps"))||{}));if(c){var i=t.get("data.".concat(n,".").concat(a,".").concat(r,".gps.").concat(c));i.lat&&i.lng&&t.set("map.targetCenter",i)}}}],discard:[]}]),qt=n(102),Qt=n.n(qt),Bt=n(106),Pt=n.n(Bt);function Kt(){var e=Object(b.a)(["units"]);return Kt=function(){return e},e}function $t(){var e=Object(b.a)(["snapshots"]);return $t=function(){return e},e}var en=Object(Wt.sequence)("updateSnapshot",[]),tn=Object(Wt.sequence)("createSnapshots",[function(e){var t=e.state,n=e.props;return{units:H.a.reduce(Object.keys(t.get("oada.".concat(n.connection_id,".bookmarks.isoblue.device-index"))),function(e,a,r){var c=t.get("oada.".concat(n.connection_id,".bookmarks.isoblue.device-index.").concat(a,".day-index")),i=Object.keys(c||{}).sort(function(e,t){return new Date(t)-new Date(e)})[0],s=H.a.max(Object.keys(c[i]["hour-index"]||{})),o=H.a.max(Object.keys(c[i]["hour-index"][s].gps||{})),u=H.a.max(Object.keys(c[i]["hour-index"][s].heartbeats||{})),l=o?c[i]["hour-index"][s].gps[o]:null,p=u?c[i]["hour-index"][s].heartbeats[u]:null;if(l&&p){var d=Math.round((Math.round((new Date).getTime()/1e3)-H.a.max([u,o]))/60),b=p.recTime-p.genTime,f=null;f=d<2?b<20?"Healthy":"Sick":d<10?"Sick":"Down";e[a]={health:f,connection:null,location:l,lastReport:d,lastHeartbeatTime:u}}else e[a]={health:"Down",connection:"NA",location:null,lastReport:"NA",lastHeartbeatTime:u};return e},{})}},Object(Gt.set)(Object(v.state)($t()),Object(v.props)(Kt()))]);function nn(){var e=Object(b.a)(["data.ready"]);return nn=function(){return e},e}function an(){var e=Object(b.a)(["connection_id"]);return an=function(){return e},e}function rn(){var e=Object(b.a)(["data.connection_id"]);return rn=function(){return e},e}function cn(){var e=Object(b.a)(["data.ready"]);return cn=function(){return e},e}var sn={bookmarks:{_type:"applications/vnd.oada.bookmarks.1+json",_rev:"0-0",isoblue:{_type:"applications/vnd.oada.isoblue.1+json",_rev:"0-0","device-index":{"*":{_type:"applications/vnd.oada.isoblue.device.1+json",_rev:"0-0","day-index":{"*":{_type:"applications/vnd.oada.isoblue.day.1+json",_rev:"0-0","hour-index":{"*":{_type:"applications/vnd.oada.isoblue.hour.1+json"}}}}}}}}},on={bookmarks:{_type:"applications/vnd.oada.bookmarks.1+json",_rev:"0-0",isoblue:{_type:"applications/vnd.oada.isoblue.1+json",_rev:"0-0","device-index":{"*":{_type:"applications/vnd.oada.isoblue.device.1+json",_rev:"0-0","day-index":{"*":{_type:"applications/vnd.oada.isoblue.day.1+json",_rev:"0-0"}}}}}}};function un(e){var t=e.state,n=e.props;return Qt.a.map(Object.keys(t.get("oada.".concat(n.connection_id,".bookmarks.isoblue.device-index"))||{}),function(e){var a=t.get("oada.".concat(n.connection_id,".bookmarks.isoblue.device-index.").concat(e,".day-index")),r=Object.keys(a||{}).sort(function(e,t){return new Date(t)-new Date(e)})[0],c=H.a.max(Object.keys(a[r]["hour-index"]||{}));return{path:"/bookmarks/isoblue/device-index/".concat(e,"/day-index/").concat(r,"/hour-index/").concat(c),watch:{signals:["snapshots.createSnapshots"]},tree:sn}}).then(function(e){return{requests:e}})}var ln=Object(Wt.sequence)("data.handleDeviceUpdate",[un,Pt.a.get]),pn=Object(Wt.sequence)("data.init",[Object(Gt.set)(Object(v.state)(cn()),!1),Pt.a.connect,Object(Gt.set)(Object(v.state)(rn()),Object(v.props)(an())),function(e){e.state,e.props;return{requests:[{path:"/bookmarks/isoblue",tree:on,watch:{signals:["data.handleDeviceUpdate"]}}]}},Pt.a.get,un,Pt.a.get,Object(Gt.set)(Object(v.state)(nn()),!0)]),dn=Object(Wt.sequence)("data.getHour",[function(e){var t=e.state;e.props;return{requests:[{connection_id:t.get("data.connection_id"),path:"/bookmarks/isoblue/device-index/".concat(t.get("diagnostics.selectedUnit"),"/day-index/").concat(t.get("diagnostics.date"),"/hour-index/").concat(t.get("diagnostics.hour")),tree:sn}]}},Pt.a.get]);function bn(){var e=Object(b.a)(["diagnostics.measurement"]);return bn=function(){return e},e}function fn(){var e=Object(b.a)(["diagnostics.mode"]);return fn=function(){return e},e}function mn(){var e=Object(b.a)(["diagnostics.measurement"]);return mn=function(){return e},e}function On(){var e=Object(b.a)(["diagnostics.mode"]);return On=function(){return e},e}function hn(){var e=Object(b.a)(["diagnostics.mode"]);return hn=function(){return e},e}function jn(){var e=Object(b.a)(["unit"]);return jn=function(){return e},e}function gn(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return gn=function(){return e},e}function vn(){var e=Object(b.a)(["diagnostics.measurement"]);return vn=function(){return e},e}function yn(){var e=Object(b.a)(["diagnostics.mode"]);return yn=function(){return e},e}function En(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return En=function(){return e},e}function kn(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return kn=function(){return e},e}function wn(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return wn=function(){return e},e}function Un(){var e=Object(b.a)(["hour"]);return Un=function(){return e},e}function In(){var e=Object(b.a)(["diagnostics.hour"]);return In=function(){return e},e}function xn(){var e=Object(b.a)(["diagnostics.selectedUnit"]);return xn=function(){return e},e}var Sn=Object(Wt.sequence)("setDefaultDate",[Object(Gt.when)(Object(v.state)(xn())),{true:[function(e){var t=e.state;e.props;return t.set("diagnostics.date",Object.keys(t.get("data.".concat(t.get("diagnostics.selectedUnit")))).sort(function(e,t){return new Date(t)-new Date(e)})[0])}],false:[function(e){var t=e.state;e.props;return t.set("diagnostics.date",null)}]}]),Dn=Object(Wt.sequence)("setDate",[function(e){var t=e.state,n=e.props;return t.set("diagnostics.date",n.date)},function(e){var t=e.state;e.props;return t.set("diagnostics.hour",H.a.max(Object.keys(t.get("data.".concat(t.get("diagnostics.selectedUnit"),".").concat(t.get("diagnostics.date"))))))},dn,At]),Mn=Object(Wt.sequence)("setHour",[Object(Gt.set)(Object(v.state)(In()),Object(v.props)(Un())),dn,At]),Cn=Object(Wt.sequence)("setDefaultHour",[Object(Gt.when)(Object(v.state)(wn())),{true:[function(e){var t=e.state;e.props;return t.set("diagnostics.hour",H.a.max(Object.keys(t.get("data.".concat(t.get("diagnostics.selectedUnit"),".").concat(t.get("diagnostics.date"))))))}],false:[function(e){var t=e.state;e.props;return t.set("diagnostics.hour",null)}]}]),Nn=Object(Wt.sequence)("setMeasurement",[function(e){var t=e.state,n=e.props;return t.set("diagnostics.measurement",n.measurement)}]),Ln=Object(Wt.sequence)("selectUnit",[Object(Gt.when)(Object(v.state)(kn())),{true:[Object(Gt.set)(Object(v.state)(En()),null),Sn,Cn,Object(Gt.set)(Object(v.state)(yn()),"map"),Object(Gt.set)(Object(v.state)(vn()),"GPS")],false:[Object(Gt.set)(Object(v.state)(gn()),Object(v.props)(jn())),Sn,Cn,At]}]),Rn=Object(Wt.sequence)("toggleMode",[Object(Gt.when)(Object(v.state)(hn()),function(e){return"map"===e}),{true:[Object(Gt.set)(Object(v.state)(On()),"graph"),Object(Gt.set)(Object(v.state)(mn()),"Latency")],false:[Object(Gt.set)(Object(v.state)(fn()),"map"),Object(Gt.set)(Object(v.state)(bn()),"GPS")]}]),Wn=Object(Wt.Module)({state:{hour:null,measurement:"GPS",selectedUnit:null,date:null,mode:"map"},signals:s}),Gn=Object(Wt.Module)({state:{targetCenter:{lat:40.428641,lng:-86.913783},userLocation:{lat:40.428641,lng:-86.913783},userLocationAvailable:!1},signals:r}),Xn=Object(Wt.Module)({signals:i}),Jn=Object(Wt.Module)({state:{},signals:c}),Vn=n(450),Tn=n.n(Vn),Zn=n(250),Fn=n.n(Zn),Hn=Object(Wt.sequence)("init",[function(){return{domain:"https://128.46.71.115",options:{redirect:"http://localhost:8000/oauth2/redirect.html",metadata:"eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHBzOi8vb3BlbmF0ay5jb20vSVNPQmx1ZUFwcC9vYXV0aDIvcmVkaXJlY3QuaHRtbCIsImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9vYXV0aDIvcmVkaXJlY3QuaHRtbCJdLCJ0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCI6InVybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlciIsImdyYW50X3R5cGVzIjpbImF1dGhvcml6YXRpb25fY29kZSJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImNvZGUiLCJpZF90b2tlbiIsImlkX3Rva2VuIHRva2VuIiwiY29kZSBpZF90b2tlbiIsImNvZGUgdG9rZW4iLCJjb2RlIGlkX3Rva2VuIHRva2VuIl0sImNsaWVudF9uYW1lIjoiSVNPQmx1ZSBIZWFsdGggTW9uaXRvciIsImNsaWVudF91cmkiOiJodHRwOi8vb2FkYS5vcGVuYXRrLmNvbS9JU09CbHVlQXBwIiwiY29udGFjdHMiOlsiU2FtIE5vZWwgPHNhbm9lbEBwdXJkdWUuZWR1PiJdLCJqd2tzIjp7ImtleXMiOlt7Imt0eSI6IlJTQSIsIm4iOiJ6YXVaRkJ1TWRsdjFrWWp6VWI0cS1fM200c21GeG5mdzRTWW9hSHE3Y2k4U2N0WTN4ajdyZEFIeWtRcG5RVnJqNktPOG1hSHYtMEJ2VzVNaGNnaXZrdVlzLXpIRXZmWUJlVkJuY3ZIZ09rSlBiYzkxQ3dfaXdPWTdFSFdCOGhNN1ZpTFFWY19EdjBoOG5KeWJCdmhMMDRDSFF0N0NwTXRWWUc2Zm9KWGMzZHE1MmpOUWJCSElaNW03VnoxS3R5em9MY3A4TzJtaGFMcDQ1VXIzQ18xZUd0djhuNU56OWJXX0JoNVhGWWJEeHY3Qm5oWk5JdzFHQ2JqakF3bXRibm5MN0dnZjRDeTYwd1JIbVI0dm9lMjFPSWpvQVNxMmpaMDN4MTJtWHM3SFBJM1lCNHkyOXd2Wk13MmdMek9kVG9ycnFPLXRsbW4xYm9Qa1dLSkpTWG9BdnciLCJlIjoiQVFBQiJ9XX0sInNvZnR3YXJlX2lkIjoiNzY1ZjFlZjctMzExNy00NjhhLTgwYjMtMDExYzQ1MjhkMGExIiwicmVnaXN0cmF0aW9uX3Byb3ZpZGVyIjoiaHR0cHM6Ly9pZGVudGl0eS5vYWRhLWRldi5jb20iLCJpYXQiOjE1NDcxNDYxOTF9.seH7eMsR1218IgEEbiq3T5ASGQAr7vqvy54_Yu8-6TIoAoVfslG-dSYWE2dXZ_P65kElqCKZLizVxyR1732vcFnOdzp6jE_pgpLg-eWZfVnIvNQdGK8Dh-5t1gVbPs1ME-j_GMCb2Un-mpDS8LAw4Nig_r-monjKyKbcPBN6gc4",scope:"oada.isoblue:all"}}},pn,tn]),Yn=Object(Wt.Module)({modules:{session:Vt,oada:Tn.a,diagnostics:Wn,map:Gn,data:Xn,snapshots:Jn},signals:o,providers:{oada:Fn.a}}),_n=(n(1009),Object(Wt.Controller)(Yn,{devtools:null})),zn=Object(d.createMuiTheme)({pallete:{primary:{light:"#718792",main:"#455a64",dark:"#1c313a",contrastText:"#ffffff"},secondary:{light:"#896a60",main:"#5b3f36",dark:"#301810",contrastText:"#ffffff"}}});Object(p.render)(l.a.createElement(g.Container,{controller:_n},l.a.createElement(d.MuiThemeProvider,{theme:zn},l.a.createElement(Rt,null))),document.getElementById("root"))},453:function(e,t,n){e.exports=n(1008)},547:function(e,t,n){},873:function(e,t){},875:function(e,t){},880:function(e,t){},882:function(e,t){},913:function(e,t){},915:function(e,t){},916:function(e,t){},922:function(e,t){},925:function(e,t){},945:function(e,t){},948:function(e,t){},964:function(e,t){},967:function(e,t){}},[[453,1,2]]]);
//# sourceMappingURL=main.82a3724f.chunk.js.map