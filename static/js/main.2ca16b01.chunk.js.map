{"version":3,"sources":["components/AppBarContent/index.js","components/Visualization/Map/Lines/index.js","components/Visualization/Map/Markers/index.js","components/Visualization/Map/index.js","components/Visualization/Graph/index.js","components/Visualization/index.js","components/DrawerContent/Summary/index.js","components/DrawerContent/Diagnostics/index.js","components/DrawerContent/index.js","components/ConnectDialog/index.js","components/App/index.js","modules/session/sequences.js","modules/session/index.js","modules/map/sequences.js","modules/data/sequences.js","modules/diagnostics/sequences.js","modules/diagnostics/index.js","modules/map/index.js","modules/data/index.js","modules/snapshots/sequences.js","modules/snapshots/index.js","modules/connection/sequences.js","modules/connection/index.js","modules/root/sequences.js","modules/root/index.js","controller.js","index.js"],"names":["AppBarContent","userLocationButton","_this","this","classes","props","userLocationAvailable","react_default","a","createElement","IconButton_default","onClick","centerOnUser","MyLocation_default","className","icon","Toolbar_default","color","aria-label","toggleDrawerOpen","Menu_default","Typography_default","variant","flex","React","Component","connect","state","_templateObject","signal","_templateObject2","_templateObject3","withStyles","theme","_icon","Object","defineProperty","breakpoints","up","width","spacing","unit","height","marginRight","down","Lines","conn_id","connection_id","ready","dataLines","devices","oada","bookmarks","isoblue","selectedUnit","date","hour","hasOwnProperty","gps_data","gps","points","_","forEach","instance","lat","lng","push","unit_resource","date_list","keys","length","last_date","maxBy","o","Date","hour_list","current_hour","max","last_hour","remove","n","current_time_sec","Math","round","getTime","positions","undefined","prev_gps_data","current_gps_data","map","Polyline","key","uuid","v4","Lines_templateObject","Lines_templateObject2","Lines_templateObject3","_templateObject4","_templateObject5","_templateObject6","withTheme","Markers","unitMarkers","snapshots","tempGPS","location","CircleMarker","ref","center","fillColor","health","fillOpacity","radius","zIndexOffset","e","selectUnit","Tooltip","direction","offset","Markers_templateObject","Markers_templateObject2","refs","leafletElement","locate","currentMarker","Marker","position","userLocation","Map","dragging","targetCenter","zoom","onlocationfound","storeUserLocation","latlng","style","TileLayer","url","attribution","Map_Markers","Map_Lines","Map_templateObject","Map_templateObject2","Map_templateObject3","Map_templateObject4","Map_templateObject5","display","Graph","rawData","chart","data","measurement","values","heartbeats","value","latency","recTime","genTime","time","toLocaleTimeString","minute","es6","margin","top","right","left","bottom","type","isAnimationActive","dataKey","stroke","strokeDasharray","label","dy","angle","interfaces","connection","Graph_templateObject","Graph_templateObject2","Graph_templateObject3","Graph_templateObject4","Graph_templateObject5","Graph_templateObject6","_templateObject7","Visualization","mode","Visualization_Map","Visualization_Graph","Visualization_templateObject","Summary","units","List_default","list","component","ListItem_default","button","concat","ListItemText_default","primary","ListItemIcon_default","Sync_default","healthy","SyncProblem_default","sick","SyncDisabled_default","align","Divider_default","Summary_templateObject","Summary_templateObject2","backgroundColor","palette","background","paper","overflow","textField","Diagnostics","measurements","visualizing","Button_default","toggleMode","measurementSelect","Select_default","renderValue","onChange","setMeasurement","target","MenuItem_default","dateSelect","setDate","hourSelect","setHour","lastReport","unselectUnit","Diagnostics_templateObject","Diagnostics_templateObject2","Diagnostics_templateObject3","Diagnostics_templateObject4","Diagnostics_templateObject5","Diagnostics_templateObject6","Diagnostics_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","DrawerContent","content","DrawerContent_Diagnostics","DrawerContent_Summary","Drawer_default","open","drawerOpen","onClose","drawerPaper","toolbar","DrawerContent_templateObject","DrawerContent_templateObject2","DrawerContent_templateObject3","mixins","oadaDomainText","ConnectDialog_templateObject","ConnectDialog_templateObject2","submitClicked","ConnectDialog_templateObject3","oadaDomainChanged","ConnectDialog_templateObject4","_React$Component","ConnectDialog","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","Dialog_default","index_es","id","autoFocus","fullwidth","App","init","root","AppBar_default","appBar","components_AppBarContent","components_DrawerContent","components_Visualization","components_ConnectDialog","App_templateObject","flexGrow","zIndex","drawer","sequence","toggle","sequences_templateObject","Module","signals","_ref","set","map_sequences_templateObject","sequences_templateObject2","debounce","continue","sequences_templateObject3","sequences_templateObject4","discard","centerOnUnit","sequences_templateObject5","_ref2","get","gps_list","last","unitLocation","masterTree","_type","_rev","device-index","*","day-index","hour-index","dayTree","setRequestLastHour","requests","device_name","device_data","path","watch","tree","handleDeviceUpdate","data_sequences_templateObject","data_sequences_templateObject2","data_sequences_templateObject3","data_sequences_templateObject4","data_sequences_templateObject5","sequences_templateObject6","sequences_templateObject7","getHour","_ref3","diagnostics_sequences_templateObject","diagnostics_sequences_templateObject2","diagnostics_sequences_templateObject3","diagnostics_sequences_templateObject4","diagnostics_sequences_templateObject5","diagnostics_sequences_templateObject6","_ref4","sort","b","diagnostics_sequences_templateObject7","sequences_templateObject8","sequences_templateObject9","when","sequences_templateObject10","true","sequences_templateObject11","sequences_templateObject12","false","sequences_templateObject13","sequences_templateObject14","createSnapshots","reduce","acc","unitkey","unitData","lastDate","lastTime","lastGPS","lastHeartbeat","msg_gps","msg_hb","lastHeartbeatTime","snapshots_sequences_templateObject","snapshots_sequences_templateObject2","signOut","connection_sequences_templateObject","connection_sequences_templateObject2","connection_sequences_templateObject3","connection_sequences_templateObject4","connection_sequences_templateObject5","updateOadaDomain","connection_sequences_templateObject6","connection_sequences_templateObject7","domain","options","redirect","metadata","scope","connection_sequences_templateObject8","connection_sequences_templateObject9","connection_sequences_templateObject10","connection_sequences_templateObject11","connection_sequences_templateObject12","setConnection","connection_sequences_templateObject13","connection_sequences_templateObject14","dialog_open","oada_domain_text","oada_domain","providers","oadaProvider","modules","session","oadaModule","diagnostics","Controller","devtools","createMuiTheme","typography","useNextVariants","render","_cerebral_react","controller","core_styles","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.2ca16b01.chunk.js","sourcesContent":["import React from \"react\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\n//import TextField from '@material-ui/core/TextField';\nimport MyLocationIcon from \"@material-ui/icons/MyLocation\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\n\nconst styles = theme => ({\n  flex: {\n    flex: 1,\n  },\n  icon: {\n    color: \"#FFFFFF\",\n    [theme.breakpoints.up(\"xs\")]: {\n      width: 5 * theme.spacing.unit,\n      height: 5 * theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n    },\n    [theme.breakpoints.down(\"xs\")]: {\n      width: 4 * theme.spacing.unit,\n      height: 4 * theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n    },\n  },\n});\n\nclass AppBarContent extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    var userLocationButton;\n    if (this.props.userLocationAvailable) {\n      userLocationButton = (\n        <IconButton onClick={() => this.props.centerOnUser({})}>\n          <MyLocationIcon className={classes.icon} />\n        </IconButton>\n      );\n    } else {\n      userLocationButton = null;\n    }\n\n    return (\n      <Toolbar>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"Open Drawer\"\n          onClick={this.props.toggleDrawerOpen}\n        >\n          <MenuIcon className={classes.icon} />\n        </IconButton>\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n          ISOBlueApp [1.0.0]\n        </Typography>\n        {userLocationButton}\n      </Toolbar>\n    );\n  }\n}\n\nexport default connect(\n  {\n    userLocationAvailable: state`map.userLocationAvailable`,\n\n    centerOnUser: signal`map.centerOnUser`,\n    toggleDrawerOpen: signal`session.toggleDrawerOpen`,\n  },\n  withStyles(styles)(AppBarContent),\n);\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { connect } from \"@cerebral/react\";\nimport { state } from \"cerebral/tags\";\nimport uuid from \"uuid\";\n//import Leaflet from 'leaflet';\nimport { Polyline } from \"react-leaflet\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({});\n\nclass Lines extends React.Component {\n  render() {\n    // get connection id\n    const conn_id = this.props.connection_id;\n\n    // do not render lines if data is not ready\n    if (!this.props.ready) return null;\n\n    var dataLines = [];\n\n    const devices =\n      this.props.oada[conn_id].bookmarks.isoblue[\"device-index\"] || {};\n\n    // Unit is selected\n    if (this.props.selectedUnit && this.props.date && this.props.hour) {\n      // ensure that the target resource actually exists\n      if (!devices.hasOwnProperty(this.props.selectedUnit)) return null;\n      if (!devices[this.props.selectedUnit].hasOwnProperty(\"day-index\"))\n        return null;\n      if (\n        !devices[this.props.selectedUnit][\"day-index\"].hasOwnProperty(\n          this.props.date,\n        )\n      )\n        return null;\n      if (\n        !devices[this.props.selectedUnit][\"day-index\"][\n          this.props.date\n        ].hasOwnProperty(\"hour-index\")\n      )\n        return null;\n      if (\n        !devices[this.props.selectedUnit][\"day-index\"][this.props.date][\n          \"hour-index\"\n        ].hasOwnProperty(this.props.hour)\n      )\n        return null;\n      if (\n        !devices[this.props.selectedUnit][\"day-index\"][this.props.date][\n          \"hour-index\"\n        ][this.props.hour].hasOwnProperty(\"gps\")\n      )\n        return null;\n\n      // get resource\n      const gps_data =\n        devices[this.props.selectedUnit][\"day-index\"][this.props.date][\n          \"hour-index\"\n        ][this.props.hour].gps;\n\n      // make a line\n      var points = [];\n      _.forEach(gps_data, instance => {\n        if (\n          instance.hasOwnProperty(\"lat\") &&\n          instance.hasOwnProperty(\"lng\") &&\n          instance.lat &&\n          instance.lng\n        ) {\n          points.push([instance.lat, instance.lng]);\n        }\n      });\n\n      // add line\n      dataLines.push(points);\n    }\n\n    // None of the units is selected\n    else {\n      _.forEach(devices, (unit_resource, unit) => {\n        // get the most recent date\n        if (!unit_resource.hasOwnProperty(\"day-index\")) return;\n        const date_list = Object.keys(unit_resource[\"day-index\"]);\n        if (date_list.length === 0) return;\n        const last_date = _.maxBy(date_list, function(o) {\n          return new Date(o);\n        });\n\n        // get hours\n        if (!unit_resource[\"day-index\"][last_date].hasOwnProperty(\"hour-index\"))\n          return;\n        const hour_list = Object.keys(\n          unit_resource[\"day-index\"][last_date][\"hour-index\"],\n        );\n\n        const current_hour = _.max(hour_list);\n        const last_hour = _.max(\n          _.remove(hour_list, n => {\n            return n !== current_hour;\n          }),\n        );\n        var current_time_sec = Math.round(new Date().getTime() / 1000);\n        var positions = [];\n\n        if (\n          last_hour !== undefined &&\n          unit_resource[\"day-index\"][last_date][\"hour-index\"][\n            last_hour\n          ].hasOwnProperty(\"gps\")\n        ) {\n          const prev_gps_data =\n            unit_resource[\"day-index\"][last_date][\"hour-index\"][last_hour].gps;\n          var prev_gps_ts = Object.keys(prev_gps_data || {});\n          prev_gps_ts.forEach(o => {\n            if (\n              current_time_sec - o <= 15 * 60 &&\n              prev_gps_data[o].hasOwnProperty(\"lat\") &&\n              prev_gps_data[o].hasOwnProperty(\"lng\") &&\n              prev_gps_data[o].lat &&\n              prev_gps_data[o].lng\n            ) {\n              positions.push([prev_gps_data[o].lat, prev_gps_data[o].lng]);\n            }\n          });\n        }\n\n        if (\n          unit_resource[\"day-index\"][last_date][\"hour-index\"][\n            current_hour\n          ].hasOwnProperty(\"gps\")\n        ) {\n          const current_gps_data =\n            unit_resource[\"day-index\"][last_date][\"hour-index\"][current_hour]\n              .gps;\n          var current_gps_ts = Object.keys(current_gps_data || {});\n          current_gps_ts.forEach(o => {\n            if (\n              current_time_sec - o <= 15 * 60 &&\n              current_gps_data[o].hasOwnProperty(\"lat\") &&\n              current_gps_data[o].hasOwnProperty(\"lng\") &&\n              current_gps_data[o].lat &&\n              current_gps_data[o].lng\n            ) {\n              positions.push([\n                current_gps_data[o].lat,\n                current_gps_data[o].lng,\n              ]);\n            }\n          });\n        }\n\n        // FIXME: currentGPS and lastGPS are not guaranteed to be sorted\n\n        dataLines.push(positions);\n      });\n    }\n\n    return (\n      <div>\n        {dataLines.map(positions => (\n          <Polyline key={uuid.v4()} positions={positions} color=\"#ffffff\" />\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  {\n    connection_id: state`data.connection_id`,\n    ready: state`data.ready`,\n    oada: state`oada`,\n    date: state`diagnostics.date`,\n    hour: state`diagnostics.hour`,\n    selectedUnit: state`diagnostics.selectedUnit`,\n  },\n  withStyles(styles, { withTheme: true })(Lines),\n);\n","import React from \"react\";\nimport _ from \"lodash\";\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\nimport { CircleMarker, Tooltip } from \"react-leaflet\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({});\n\nclass Markers extends React.Component {\n  render() {\n    const unitMarkers = [];\n    _.forEach(Object.keys(this.props.snapshots) || {}, unit => {\n      var tempGPS = this.props.snapshots[unit].location;\n      if (\n        tempGPS &&\n        tempGPS.hasOwnProperty(\"lat\") &&\n        tempGPS.hasOwnProperty(\"lng\") &&\n        tempGPS.lat &&\n        tempGPS.lng\n      ) {\n        unitMarkers.push(\n          <CircleMarker\n            ref={unit => {\n              this.unit = unit;\n            }}\n            key={unit}\n            center={[\n              this.props.snapshots[unit].location.lat,\n              this.props.snapshots[unit].location.lng,\n            ]}\n            color={\"#ffffff\"}\n            fillColor={(() => {\n              switch (this.props.snapshots[unit].health) {\n                case \"Healthy\":\n                  return \"#008000\";\n                case \"Sick\":\n                  return \"#ffbf00\";\n                case \"Down\":\n                  return \"#707070\";\n                default:\n                  return \"#707070\";\n              }\n            })()}\n            fillOpacity={1}\n            radius={12}\n            zIndexOffset={1}\n            onClick={e => this.props.selectUnit({ unit: unit })}\n          >\n            <Tooltip direction=\"top\" offset={[0, -10]}>\n              <b>Unit: {unit}</b>\n              <br />\n              <center>\n                <b>{this.props.snapshots[unit].health}</b>\n              </center>\n            </Tooltip>\n          </CircleMarker>,\n        );\n      }\n    });\n\n    return <div>{unitMarkers}</div>;\n  }\n}\n\nexport default connect(\n  {\n    snapshots: state`snapshots`,\n    selectUnit: signal`diagnostics.selectUnit`,\n  },\n  withStyles(styles, { withTheme: true })(Markers),\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\nimport { Map, Marker, TileLayer } from \"react-leaflet\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nimport \"./Map.css\";\nimport Lines from \"./Lines/\";\nimport Markers from \"./Markers/\";\n\nconst styles = theme => ({\n  map: {\n    position: \"relative\",\n    display: \"flex\",\n    width: \"100%\",\n    height: \"calc(100% - 56px)\",\n  },\n});\n\nconst mapTiles =\n  \"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\";\nconst attrib =\n  \"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\";\n\nclass map extends React.Component {\n  componentDidMount() {\n    this.refs.map.leafletElement.locate();\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    const currentMarker = [];\n    if (this.props.userLocationAvailable) {\n      currentMarker.push(\n        <Marker\n          key={\"user\"}\n          position={[this.props.userLocation.lat, this.props.userLocation.lng]}\n        >\n          zIndexOffset={1}\n        </Marker>,\n      );\n    }\n\n    return (\n      <div className={classes.map}>\n        <Map\n          dragging={true}\n          center={[this.props.targetCenter.lat, this.props.targetCenter.lng]}\n          ref=\"map\"\n          zoom={18}\n          onlocationfound={e =>\n            this.props.storeUserLocation({\n              lat: e.latlng.lat,\n              lng: e.latlng.lng,\n            })\n          }\n          style={{ height: \"100%\", width: \"100%\", position: \"relative\" }}\n        >\n          <TileLayer url={mapTiles} attribution={attrib} />\n          <Markers />\n          <Lines />\n          {currentMarker}\n        </Map>\n      </div>\n    );\n  }\n}\n\nmap.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default connect(\n  {\n    // states\n    targetCenter: state`map.targetCenter`,\n    userLocation: state`map.userLocation`,\n    userLocationAvailable: state`map.userLocationAvailable`,\n    // signals\n    storeUserLocation: signal`map.storeUserLocation`,\n    selectUnit: signal`diagnostics.selectUnit`,\n  },\n  withStyles(styles, { withTheme: true })(map),\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport { state } from \"cerebral/tags\";\nimport {\n  LineChart,\n  Line,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  ResponsiveContainer,\n  Tooltip,\n} from \"recharts\";\nimport _ from \"lodash\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({});\n\nclass Graph extends React.Component {\n  render() {\n    var rawData;\n    if (this.props.selectedUnit && this.props.date && this.props.hour) {\n      rawData = this.props.oada[this.props.connection_id].bookmarks.isoblue[\n        \"device-index\"\n      ][this.props.selectedUnit][\"day-index\"][this.props.date][\"hour-index\"][\n        this.props.hour\n      ];\n    } else {\n      // this should not happen\n      return null;\n    }\n\n    var data = [];\n    var chart;\n    if (this.props.measurement === \"Latency\" && rawData) {\n      _.forEach(Object.values(rawData.heartbeats || {}), value => {\n        value.latency = value.recTime - value.genTime;\n        value.time = new Date(value.genTime * 1000).toLocaleTimeString(\n          \"en-US\",\n          { hour: \"numeric\", minute: \"numeric\" },\n        );\n        data.push(value);\n      });\n\n      chart = (\n        <LineChart\n          data={data}\n          margin={{ top: 20, right: 30, left: 0, bottom: 80 }}\n        >\n          <Line\n            type=\"step\"\n            isAnimationActive={false}\n            dataKey={\"latency\"}\n            stroke=\"#8884d8\"\n          />\n          <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\" />\n          <XAxis\n            dataKey={\"time\"}\n            label={{ value: \"Time\", position: \"insideBottom\", dy: 20 }}\n          />\n          <YAxis\n            dataKey={\"latency\"}\n            label={{\n              value: \"Latency (sec)\",\n              position: \"insideLeft\",\n              angle: -90,\n            }}\n          />\n          <Tooltip />\n        </LineChart>\n      );\n    } else if (this.props.measurement === \"Wifi RSSI\" && rawData) {\n      _.forEach(Object.values(rawData.heartbeats || {}), value => {\n        _.forEach(value.interfaces, connection => {\n          if (connection.type === \"wifi\") {\n            connection.time = new Date(value.genTime * 1000).toLocaleTimeString(\n              \"en-US\",\n              { hour: \"numeric\", minute: \"numeric\" },\n            );\n            data.push(connection);\n          }\n        });\n      });\n\n      chart = (\n        <LineChart\n          data={data}\n          margin={{ top: 20, right: 30, left: 0, bottom: 80 }}\n        >\n          <Line\n            type=\"step\"\n            isAnimationActive={false}\n            dataKey={\"rssi\"}\n            stroke=\"#8884d8\"\n          />\n          <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\" />\n          <XAxis dataKey={\"time\"} />\n          <YAxis\n            dataKey={\"rssi\"}\n            label={{\n              value: \"WiFi RSSI (dB)\",\n              position: \"insideLeft\",\n              angle: -90,\n            }}\n          />\n          <Tooltip />\n        </LineChart>\n      );\n    } else if (this.props.measurement === \"Cellular RSSI\" && rawData) {\n      _.forEach(Object.values(rawData.heartbeats || {}), value => {\n        _.forEach(value.interfaces, connection => {\n          if (connection.type === \"cellular\") {\n            connection.time = new Date(value.genTime * 1000).toLocaleTimeString(\n              \"en-US\",\n              { hour: \"numeric\", minute: \"numeric\" },\n            );\n            data.push(connection);\n          }\n        });\n      });\n\n      chart = (\n        <LineChart\n          data={data}\n          margin={{ top: 20, right: 30, left: 0, bottom: 80 }}\n        >\n          <Line\n            type=\"step\"\n            isAnimationActive={false}\n            dataKey={\"rssi\"}\n            stroke=\"#8884d8\"\n          />\n          <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\" />\n          <XAxis dataKey={\"time\"} />\n          <YAxis\n            dataKey={\"rssi\"}\n            label={{\n              value: \"Cellular RSSI (dB)\",\n              position: \"insideLeft\",\n              angle: -90,\n            }}\n          />\n          <Tooltip />\n        </LineChart>\n      );\n    } else {\n      chart = (\n        <LineChart margin={{ top: 20, right: 30, left: 0, bottom: 80 }} />\n      );\n    }\n\n    return (\n      <ResponsiveContainer width={\"100%\"} height={\"100%\"}>\n        {chart}\n      </ResponsiveContainer>\n    );\n  }\n}\n\nexport default connect(\n  {\n    connection_id: state`data.connection_id`,\n    date: state`diagnostics.date`,\n    hour: state`diagnostics.hour`,\n    selectedUnit: state`diagnostics.selectedUnit`,\n    measurement: state`diagnostics.measurement`,\n    oada: state`oada`,\n    data: state`data`,\n  },\n  withStyles(styles, { withTheme: true })(Graph),\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport { state } from \"cerebral/tags\";\n\nimport Map from \"./Map/\";\nimport Graph from \"./Graph/\";\n\nclass Visualization extends React.Component {\n  render() {\n    var graphic;\n    if (this.props.mode === \"map\") {\n      graphic = <Map />;\n    } else {\n      graphic = <Graph />;\n    }\n\n    return graphic;\n  }\n}\n\nexport default connect(\n  {\n    mode: state`diagnostics.mode`,\n  },\n  Visualization,\n);\n","import React from \"react\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport SyncIcon from \"@material-ui/icons/Sync\";\nimport SyncProblemIcon from \"@material-ui/icons/SyncProblem\";\nimport SyncDisabledIcon from \"@material-ui/icons/SyncDisabled\";\n\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\n\nconst styles = theme => ({\n  list: {\n    width: \"90%\",\n    backgroundColor: theme.palette.background.paper,\n    //position: 'relative',\n    overflow: \"auto\",\n    height: 300,\n    margin: 1.5 * theme.spacing.unit,\n  },\n  textField: {\n    margin: 1.5 * theme.spacing.unit,\n  },\n  healthy: { color: \"#008000\" },\n  sick: { color: \"#ffbf00\" },\n  down: { color: \"#ff0000\" },\n});\n\nclass Summary extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    // create unit list\n    var units;\n    if (Object.keys(this.props.health || {}).length > 0) {\n      units = (\n        <List className={classes.list} component=\"nav\">\n          {Object.keys(this.props.health).map(unit => (\n            <ListItem\n              button\n              key={`-${unit}`}\n              onClick={() => this.props.selectUnit({ unit: unit })}\n            >\n              <ListItemText primary={unit} />\n              <ListItemIcon>\n                {(() => {\n                  switch (this.props.health[unit]) {\n                    case \"Healthy\":\n                      return <SyncIcon className={classes.healthy} />;\n                    case \"Sick\":\n                      return <SyncProblemIcon className={classes.sick} />;\n                    case \"Down\":\n                      return <SyncDisabledIcon />;\n                    default:\n                      return <SyncDisabledIcon />;\n                  }\n                })()}\n              </ListItemIcon>\n            </ListItem>\n          ))}\n        </List>\n      );\n    } else {\n      units = <List className={classes.list} component=\"nav\" />;\n    }\n\n    // wrapper for unit list\n    return (\n      <List>\n        <ListItem>\n          <ListItemText align=\"center\" primary={\"My ISOBlues:\"} />\n        </ListItem>\n        {units}\n        <Divider />\n      </List>\n    );\n  }\n}\n\nexport default connect(\n  {\n    health: state`health`,\n    selectUnit: signal`diagnostics.selectUnit`,\n  },\n  withStyles(styles)(Summary),\n);\n","import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\n\nconst styles = theme => ({});\n\nclass Diagnostics extends React.Component {\n  render() {\n    const visualizing = (\n      <ListItem>\n        <ListItemText align=\"center\">\n          <Button onClick={() => this.props.toggleMode({})} variant=\"contained\">\n            {this.props.mode === \"map\" ? \"Show Statistics\" : \"Show Map\"}\n          </Button>\n        </ListItemText>\n      </ListItem>\n    );\n\n    var measurements;\n    if (this.props.mode === \"map\") {\n      measurements = [\"GPS\"];\n    } else {\n      measurements = [\"Latency\", \"Wifi RSSI\", \"Cellular RSSI\"];\n    }\n    const measurementSelect = (\n      <Select\n        value={this.props.measurement}\n        renderValue={value => `${value}`}\n        onChange={value =>\n          this.props.setMeasurement({ measurement: value.target.value })\n        }\n      >\n        {measurements.map(measurement => (\n          <MenuItem key={measurement} value={measurement}>\n            {measurement}\n          </MenuItem>\n        ))}\n      </Select>\n    );\n\n    const dateSelect = (\n      <Select\n        value={this.props.date}\n        renderValue={value => `${value}`}\n        onChange={value => this.props.setDate({ date: value.target.value })}\n      >\n        {Object.keys(\n          this.props.oada[this.props.connection_id].bookmarks.isoblue[\n          \"device-index\"\n          ][this.props.selectedUnit][\"day-index\"],\n        ).map(date => (\n          <MenuItem key={date} value={date}>\n            {date}\n          </MenuItem>\n        ))}\n        ;\n      </Select>\n    );\n\n    const hourSelect = (\n      <Select\n        value={this.props.hour}\n        renderValue={value => `${value}`}\n        onChange={value => this.props.setHour({ hour: value.target.value })}\n      >\n        {Object.keys(\n          this.props.oada[this.props.connection_id].bookmarks.isoblue[\n          \"device-index\"\n          ][this.props.selectedUnit][\"day-index\"][this.props.date][\n          \"hour-index\"\n          ],\n        ).map(hour => (\n          <MenuItem key={hour} value={hour}>\n            {hour}\n          </MenuItem>\n        ))}\n        ;\n      </Select>\n    );\n\n    return (\n      <List>\n        <ListItem>\n          <ListItemText align=\"center\" primary={\"Selected Unit:\"} />\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\" primary={this.props.selectedUnit} />\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText align=\"center\" primary=\"ISOBlue Status:\" />\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\" primary={\"Health:\"} />\n          <ListItemText\n            align=\"center\"\n            primary={this.props.snapshots[this.props.selectedUnit].health}\n          />\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\" primary={\"Last Report:\"} />\n          <ListItemText\n            align=\"center\"\n            primary={\n              this.props.snapshots[this.props.selectedUnit].lastReport === \"NA\"\n                ? \"NA\"\n                : this.props.snapshots[this.props.selectedUnit].lastReport +\n                \" min\"\n            }\n          />\n        </ListItem>\n        <Divider />\n        <ListItem>\n          <ListItemText align=\"center\" primary={\"Available Data:\"} />\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\">{measurementSelect}</ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\">{dateSelect}</ListItemText>\n        </ListItem>\n        <ListItem>\n          <ListItemText align=\"center\">{hourSelect}</ListItemText>\n        </ListItem>\n        {visualizing}\n        <Divider />\n        <ListItem>\n          <ListItemText align=\"center\">\n            <Button\n              variant=\"contained\"\n              onClick={() => this.props.unselectUnit({})}\n            >\n              Back to Main\n            </Button>\n          </ListItemText>\n        </ListItem>\n      </List>\n    );\n  }\n}\n\nexport default connect(\n  {\n    date: state`diagnostics.date`,\n    hour: state`diagnostics.hour`,\n    measurement: state`diagnostics.measurement`,\n    selectedUnit: state`diagnostics.selectedUnit`,\n    snapshots: state`snapshots`,\n    data: state`data`,\n    mode: state`diagnostics.mode`,\n    oada: state`oada`,\n    connection_id: state`data.connection_id`,\n\n    selectUnit: signal`diagnostics.selectUnit`,\n    unselectUnit: signal`diagnostics.unselectUnit`,\n    setDate: signal`diagnostics.setDate`,\n    setHour: signal`diagnostics.setHour`,\n    setMeasurement: signal`diagnostics.setMeasurement`,\n    toggleMode: signal`diagnostics.toggleMode`,\n  },\n  withStyles(styles)(Diagnostics),\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport { state, signal } from \"cerebral/tags\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Drawer from \"@material-ui/core/Drawer\";\n\nimport Summary from \"./Summary/\";\nimport Diagnostics from \"./Diagnostics/\";\n\nconst styles = theme => ({\n  drawerPaper: {\n    position: \"relative\",\n    width: 240,\n    backgroundColor: \"#eeeeee\",\n  },\n  toolbar: theme.mixins.toolbar,\n});\n\nclass DrawerContent extends React.Component {\n  render() {\n    const { classes } = this.props;\n\n    var content;\n    if (this.props.selectedUnit) {\n      content = <Diagnostics />;\n    } else {\n      content = <Summary />;\n    }\n\n    return (\n      <Drawer\n        open={this.props.drawerOpen}\n        onClose={this.props.toggleDrawerOpen}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.toolbar} />\n        {content}\n      </Drawer>\n    );\n  }\n}\n\nexport default connect(\n  {\n    selectedUnit: state`diagnostics.selectedUnit`,\n    drawerOpen: state`session.drawerOpen`,\n\n    toggleDrawerOpen: signal`session.toggleDrawerOpen`,\n  },\n  withStyles(styles)(DrawerContent),\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport {\n  TextField,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Button from \"@material-ui/core/Button\";\nimport { state, signal } from \"cerebral/tags\";\n\nexport default connect(\n  {\n    oadaDomainText: state`connection.oada_domain_text`,\n    open: state`connection.dialog_open`,\n\n    submitClicked: signal`connection.setConnection`,\n    oadaDomainChanged: signal`connection.updateOadaDomain`,\n  },\n\n  class ConnectDialog extends React.Component {\n    render() {\n      return (\n        <Dialog open={this.props.open} className={\"connection-dialog\"}>\n          <DialogTitle id=\"form-dialog-title\">\n            Connect to OADA Server\n          </DialogTitle>\n          <DialogContent>Please enter the domain of OADA server.</DialogContent>\n          <DialogContent>\n            <TextField\n              autoFocus\n              label=\"Domain\"\n              value={this.props.oadaDomainText}\n              onChange={e =>\n                this.props.oadaDomainChanged({ value: e.target.value })\n              }\n              margin=\"dense\"\n              fullwidth=\"true\"\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button\n              onClick={() => {\n                this.props.open = false;\n              }}\n              color=\"secondary\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={() => {\n                this.props.submitClicked({});\n              }}\n              color=\"secondary\"\n            >\n              Submit\n            </Button>\n          </DialogActions>\n        </Dialog>\n      );\n    }\n  },\n);\n","import React from \"react\";\nimport { connect } from \"@cerebral/react\";\nimport { signal } from \"cerebral/tags\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\n\nimport AppBarContent from \"../AppBarContent/\";\nimport Visualization from \"../Visualization/\";\nimport DrawerContent from \"../DrawerContent/index.js\";\nimport ConnectDialog from \"../ConnectDialog/index.js\";\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100vh\",\n    zIndex: 1,\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  content: {\n    flexGrow: 1,\n  },\n  toolbar: theme.mixins.toolbar,\n});\n\nclass App extends React.Component {\n  componentWillMount() {\n    this.props.init({});\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <AppBar position=\"absolute\" className={classes.appBar}>\n          <AppBarContent />\n        </AppBar>\n        <DrawerContent />\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          <Visualization />\n        </main>\n        <ConnectDialog />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  {\n    init: signal`init`,\n  },\n  withStyles(styles, { withTheme: true })(App),\n);\n","import { sequence } from \"cerebral\";\nimport { state } from \"cerebral/tags\";\nimport { toggle } from \"cerebral/operators\";\n\nexport const toggleDrawerOpen = sequence(\"toggleDrawerOpen\", [\n  toggle(state`session.drawerOpen`),\n]);\n","import { Module } from 'cerebral';\nimport * as signals from './sequences'\n\nexport default Module({\n  state: {\n    drawerOpen: true,\n  },\n  signals,\n});\n\n\n","import { sequence } from \"cerebral\";\nimport { state } from \"cerebral/tags\";\nimport { set, debounce } from \"cerebral/operators\";\nimport _ from \"lodash\";\n\nexport const storeUserLocation = sequence(\"storeUserLocation\", [\n  ({ state, props }) =>\n    state.set(\"map.userLocation\", { lat: props.lat, lng: props.lng }),\n  set(state`map.userLocationAvailable`, true),\n]);\n\nexport const centerOnUser = sequence(\"centerOnUser\", [\n  set(state`map.targetCenter`, { lat: 40.428641, lng: -86.913783 }),\n  debounce(1),\n  {\n    continue: [set(state`map.targetCenter`, state`map.userLocation`)],\n    discard: [],\n  },\n]);\n\nexport const centerOnUnit = sequence(\"centerOnUnit\", [\n  set(state`map.targetCenter`, { lat: 40.428641, lng: -86.913783 }),\n  debounce(1),\n  {\n    continue: [\n      ({ state, props }) => {\n        const conn_id = state.get(\"data.connection_id\");\n        let unit = state.get(`diagnostics.selectedUnit`);\n        let date = state.get(`diagnostics.date`);\n        let hour = state.get(`diagnostics.hour`);\n        if (unit && date && hour) {\n          const gps_list =\n            state.get(\n              `oada.${conn_id}.bookmarks.isoblue.device-index.${unit}.day-index.${date}.hour-index.${hour}.gps`,\n            ) || {};\n          const last = _.max(Object.keys(gps_list));\n          if (last) {\n            const unitLocation = gps_list[last];\n            if (unitLocation.lat && unitLocation.lng) {\n              state.set(`map.targetCenter`, unitLocation);\n            }\n          }\n        }\n      },\n      //set(state`map.targetCenter`, state`snapshots.${state`diagnostics.selectedUnit`}.location`),\n    ],\n    discard: [],\n  },\n]);\n","import { sequence } from \"cerebral\";\nimport { state, props } from \"cerebral/tags\";\nimport { set } from \"cerebral/operators\";\nimport _ from \"lodash\";\nimport oada from \"@oada/cerebral-module/sequences\";\n\nvar masterTree = {\n  bookmarks: {\n    _type: \"applications/vnd.oada.bookmarks.1+json\",\n    _rev: \"0-0\",\n    isoblue: {\n      _type: \"applications/vnd.oada.isoblue.1+json\",\n      _rev: \"0-0\",\n      \"device-index\": {\n        \"*\": {\n          _type: \"applications/vnd.oada.isoblue.device.1+json\",\n          _rev: \"0-0\",\n          \"day-index\": {\n            \"*\": {\n              _type: \"applications/vnd.oada.isoblue.day.1+json\",\n              _rev: \"0-0\",\n              \"hour-index\": {\n                \"*\": {\n                  _type: \"applications/vnd.oada.isoblue.hour.1+json\",\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  },\n};\n\nvar dayTree = {\n  bookmarks: {\n    _type: \"applications/vnd.oada.bookmarks.1+json\",\n    _rev: \"0-0\",\n    isoblue: {\n      _type: \"applications/vnd.oada.isoblue.1+json\",\n      _rev: \"0-0\",\n      \"device-index\": {\n        \"*\": {\n          _type: \"applications/vnd.oada.isoblue.device.1+json\",\n          _rev: \"0-0\",\n          \"day-index\": {\n            \"*\": {\n              _type: \"applications/vnd.oada.isoblue.day.1+json\",\n              _rev: \"0-0\",\n            },\n          },\n        },\n      },\n    },\n  },\n};\n\n/* Set requests */\nfunction setRequestLastHour({ state, props }) {\n  const devices = Object.keys(\n    state.get(`oada.${props.connection_id}.bookmarks.isoblue.device-index`) ||\n      {},\n  );\n\n  var requests = []; // OADA requests\n\n  devices.forEach(device_name => {\n    var device_data =\n      state.get(\n        `oada.${\n          props.connection_id\n        }.bookmarks.isoblue.device-index.${device_name}.day-index`,\n      ) || {};\n\n    // find the most recent day\n    const date_list = Object.keys(device_data);\n    if (date_list.length === 0) {\n      return;\n    }\n    const last_date = _.maxBy(date_list, function(o) {\n      return new Date(o);\n    });\n\n    //find the most recent hour\n    const last_hour = _.max(\n      Object.keys(device_data[last_date][\"hour-index\"] || {}),\n    );\n\n    // add request\n    requests.push({\n      path: `/bookmarks/isoblue/device-index/${device_name}/day-index/${last_date}/hour-index/${last_hour}`,\n      watch: { signals: [\"snapshots.createSnapshots\"] },\n      tree: masterTree,\n    });\n  });\n\n  return { requests };\n}\n\n/* Called when the device list was modified */\nexport const handleDeviceUpdate = sequence(\"data.handleDeviceUpdate\", [\n  set(state`data.ready`, false),\n  setRequestLastHour,\n  oada.get,\n  set(state`data.ready`, true),\n]);\n\n/* Initial sequence. Only called at startup. */\nexport const init = sequence(\"data.init\", [\n  set(state`data.ready`, false),\n  set(state`health`, {}),\n  // connect to server\n  oada.connect,\n  set(state`data.connection_id`, props`connection_id`),\n\n  // get devices\n  ({ state, props }) => ({\n    requests: [\n      {\n        path: \"/bookmarks/isoblue\",\n        tree: dayTree,\n        watch: { signals: [\"data.handleDeviceUpdate\"] },\n      },\n    ],\n  }),\n  oada.get,\n\n  // get most recent data\n  setRequestLastHour,\n  oada.get,\n  set(state`data.ready`, true),\n]);\n\n/* Set request to OADA server based on currently selected device, date, and hour */\nexport const getHour = sequence(\"data.getHour\", [\n  ({ state, props }) => ({\n    requests: [\n      {\n        connection_id: state.get(\"data.connection_id\"),\n        path: `/bookmarks/isoblue/device-index/${state.get(\n          `diagnostics.selectedUnit`,\n        )}/day-index/${state.get(`diagnostics.date`)}/hour-index/${state.get(\n          `diagnostics.hour`,\n        )}`,\n        tree: masterTree,\n      },\n    ],\n  }),\n  oada.get,\n]);\n","import { sequence } from \"cerebral\";\nimport { state, props } from \"cerebral/tags\";\nimport { set, when } from \"cerebral/operators\";\nimport _ from \"lodash\";\nimport * as map from \"../map/sequences\";\nimport * as data from \"../data/sequences\";\n\nexport const setDate = sequence(\"setDate\", [\n  set(state`diagnostics.date`, props`date`),\n  ({ state, props }) =>\n    state.set(\n      \"diagnostics.hour\",\n      _.max(\n        Object.keys(\n          state.get(\n            `oada.${state.get(\n              \"data.connection_id\",\n            )}.bookmarks.isoblue.device-index.${state.get(\n              \"diagnostics.selectedUnit\",\n            )}.day-index.${state.get(\"diagnostics.date\")}.hour-index`,\n          ),\n        ),\n      ),\n    ),\n  data.getHour,\n  map.centerOnUnit,\n]);\n\nexport const setHour = sequence(\"setHour\", [\n  set(state`diagnostics.hour`, props`hour`),\n  data.getHour,\n  map.centerOnUnit,\n]);\n\nexport const setMeasurement = sequence(\"setMeasurement\", [\n  ({ state, props }) => state.set(\"diagnostics.measurement\", props.measurement),\n]);\n\n/* Set the selected unit, default date, and hour */\nexport const selectUnit = sequence(\"selectUnit\", [\n  ({ state, props }) => ({ connection_id: state.get(\"data.connection_id\") }),\n  set(state`diagnostics.selectedUnit`, props`unit`),\n\n  // set default date and hour\n  ({ state, props }) => {\n    const date = Object.keys(\n      state.get(\n        `oada.${props.connection_id}.bookmarks.isoblue.device-index.${\n        props.unit\n        }.day-index`,\n      ),\n    ).sort((a, b) => {\n      return new Date(b) - new Date(a);\n    })[0];\n\n    const hour = _.max(\n      Object.keys(\n        state.get(\n          `oada.${props.connection_id}.bookmarks.isoblue.device-index.${\n          props.unit\n          }.day-index.${date}.hour-index`,\n        ),\n      ),\n    );\n\n    state.set(\"diagnostics.date\", date);\n    state.set(\"diagnostics.hour\", hour);\n  },\n\n  // center the map\n  map.centerOnUnit,\n]);\n\nexport const unselectUnit = sequence(\"unselectUnit\", [\n  set(state`diagnostics.selectedUnit`, null),\n  set(state`diagnostics.date`, null),\n  set(state`diagnostics.hour`, null),\n]);\n\n/* Toggle map view and graph view */\nexport const toggleMode = sequence(\"toggleMode\", [\n  when(state`diagnostics.mode`, value => value === \"map\"),\n  {\n    true: [\n      set(state`diagnostics.mode`, \"graph\"),\n      set(state`diagnostics.measurement`, \"Latency\"),\n    ],\n    false: [\n      set(state`diagnostics.mode`, \"map\"),\n      set(state`diagnostics.measurement`, \"GPS\"),\n    ],\n  },\n]);\n","import { Module } from 'cerebral';\nimport * as signals from './sequences';\n\nexport default Module({\n  state: {\n    hour: null,\n    measurement: 'GPS',\n    selectedUnit: null,\n    date: null,\n    mode: \"map\",\n  },\n  signals,\n});\n","import { Module } from 'cerebral';\nimport * as signals from './sequences';\n\nexport default Module({\n\n  state: {\n    targetCenter: { lat: 40.428641, lng: -86.913783 },\n    userLocation: { lat: 40.428641, lng: -86.913783 },\n    userLocationAvailable: false,\n  },\n\n  signals,\n\n});\n","import { Module } from \"cerebral\";\nimport * as signals from \"./sequences\";\n\nexport default Module({\n  //state: stateTree,\n  //state: {},\n\n  signals,\n});\n","import { sequence } from \"cerebral\";\nimport { state, props } from \"cerebral/tags\";\nimport { set } from \"cerebral/operators\";\nimport _ from \"lodash\";\n\nexport const createSnapshots = sequence(\"createSnapshots\", [\n  ({ state, props }) => ({\n    units: _.reduce(\n      Object.keys(\n        state.get(`oada.${props.connection_id}.bookmarks.isoblue.device-index`),\n      ),\n      (acc, unit, unitkey) => {\n        // iterate over all the ISOBlue units\n        var unitData = state.get(\n          `oada.${\n            props.connection_id\n          }.bookmarks.isoblue.device-index.${unit}.day-index`,\n        );\n        //var health, location, connection, lastReport;\n        const lastDate = _.maxBy(Object.keys(unitData || {}), function(o) {\n          return new Date(o);\n        });\n        if (!lastDate) return acc;\n        if (!unitData[lastDate].hasOwnProperty(\"hour-index\")) return acc;\n        var lastTime = _.max(\n          Object.keys(unitData[lastDate][\"hour-index\"] || {}),\n        );\n        if (!lastTime) return acc;\n        var lastGPS =\n          _.max(\n            Object.keys(unitData[lastDate][\"hour-index\"][lastTime].gps || {}),\n          ) || null;\n        var lastHeartbeat =\n          _.max(\n            Object.keys(\n              unitData[lastDate][\"hour-index\"][lastTime].heartbeats || {},\n            ),\n          ) || null;\n\n        // get messages\n        const msg_gps = lastGPS\n          ? unitData[lastDate][\"hour-index\"][lastTime][\"gps\"][lastGPS]\n          : null;\n        const msg_hb = lastHeartbeat\n          ? unitData[lastDate][\"hour-index\"][lastTime][\"heartbeats\"][\n              lastHeartbeat\n            ]\n          : null;\n\n        if (msg_gps && msg_hb) {\n          var lastReport = Math.round(\n            (Math.round(new Date().getTime() / 1000) -\n              _.max([lastHeartbeat, lastGPS])) /\n              60,\n          );\n\n          var latency = null;\n          if (\n            msg_hb.hasOwnProperty(\"recTime\") &&\n            msg_hb.hasOwnProperty(\"genTime\")\n          ) {\n            latency = msg_hb.recTime - msg_hb.genTime;\n          }\n\n          var health = null;\n          if (lastReport < 2) {\n            if (latency < 20) {\n              health = \"Healthy\";\n            } else {\n              health = \"Sick\";\n            }\n          } else if (lastReport < 10) {\n            health = \"Sick\";\n          } else {\n            health = \"Down\";\n          }\n\n          var location = null;\n          if (msg_gps.hasOwnProperty(\"lat\") && msg_gps.hasOwnProperty(\"lng\")) {\n            location = msg_gps;\n          }\n\n          var connection = null;\n\n          acc[unit] = {\n            health,\n            connection,\n            location,\n            lastReport,\n            lastHeartbeatTime: lastHeartbeat,\n          };\n          state.set(`health.${unit}`, health);\n        } else {\n          acc[unit] = {\n            health: \"Down\",\n            connection: null,\n            location: null,\n            lastReport: \"NA\",\n            lastHeartbeatTime: lastHeartbeat,\n          };\n          state.set(`health.${unit}`, \"Down\");\n        }\n        return acc;\n      },\n      {},\n    ),\n  }),\n  set(state`snapshots`, props`units`),\n]);\n","import { Module } from 'cerebral';\nimport * as signals from './sequences'\n\nexport default Module({\n  state: {\n  },\n  signals,\n});\n\n\n","/* cerebral imports */\nimport { state, props } from \"cerebral/tags\";\nimport { set } from \"cerebral/operators\";\nimport oada from \"@oada/cerebral-module/sequences\";\nimport * as data from \"../data/sequences\";\nimport * as snapshots from \"../snapshots/sequences\";\n\nconst _SCOPE = \"oada.isoblue:all\";\nconst _OPENATK_METADATA =\n  \"eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHBzOi8vb3BlbmF0ay5jb20vSVNPQmx1ZUFwcC9vYXV0aDIvcmVkaXJlY3QuaHRtbCIsImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9vYXV0aDIvcmVkaXJlY3QuaHRtbCJdLCJ0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCI6InVybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlciIsImdyYW50X3R5cGVzIjpbImF1dGhvcml6YXRpb25fY29kZSJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImNvZGUiLCJpZF90b2tlbiIsImlkX3Rva2VuIHRva2VuIiwiY29kZSBpZF90b2tlbiIsImNvZGUgdG9rZW4iLCJjb2RlIGlkX3Rva2VuIHRva2VuIl0sImNsaWVudF9uYW1lIjoiSVNPQmx1ZSBIZWFsdGggTW9uaXRvciIsImNsaWVudF91cmkiOiJodHRwOi8vb2FkYS5vcGVuYXRrLmNvbS9JU09CbHVlQXBwIiwiY29udGFjdHMiOlsiU2FtIE5vZWwgPHNhbm9lbEBwdXJkdWUuZWR1PiJdLCJqd2tzIjp7ImtleXMiOlt7Imt0eSI6IlJTQSIsIm4iOiJ6YXVaRkJ1TWRsdjFrWWp6VWI0cS1fM200c21GeG5mdzRTWW9hSHE3Y2k4U2N0WTN4ajdyZEFIeWtRcG5RVnJqNktPOG1hSHYtMEJ2VzVNaGNnaXZrdVlzLXpIRXZmWUJlVkJuY3ZIZ09rSlBiYzkxQ3dfaXdPWTdFSFdCOGhNN1ZpTFFWY19EdjBoOG5KeWJCdmhMMDRDSFF0N0NwTXRWWUc2Zm9KWGMzZHE1MmpOUWJCSElaNW03VnoxS3R5em9MY3A4TzJtaGFMcDQ1VXIzQ18xZUd0djhuNU56OWJXX0JoNVhGWWJEeHY3Qm5oWk5JdzFHQ2JqakF3bXRibm5MN0dnZjRDeTYwd1JIbVI0dm9lMjFPSWpvQVNxMmpaMDN4MTJtWHM3SFBJM1lCNHkyOXd2Wk13MmdMek9kVG9ycnFPLXRsbW4xYm9Qa1dLSkpTWG9BdnciLCJlIjoiQVFBQiJ9XX0sInNvZnR3YXJlX2lkIjoiNzY1ZjFlZjctMzExNy00NjhhLTgwYjMtMDExYzQ1MjhkMGExIiwicmVnaXN0cmF0aW9uX3Byb3ZpZGVyIjoiaHR0cHM6Ly9pZGVudGl0eS5vYWRhLWRldi5jb20iLCJpYXQiOjE1NDcxNDYxOTF9.seH7eMsR1218IgEEbiq3T5ASGQAr7vqvy54_Yu8-6TIoAoVfslG-dSYWE2dXZ_P65kElqCKZLizVxyR1732vcFnOdzp6jE_pgpLg-eWZfVnIvNQdGK8Dh-5t1gVbPs1ME-j_GMCb2Un-mpDS8LAw4Nig_r-monjKyKbcPBN6gc4\";\n\nconst _REDIRECT_OPENATK = \"https://openatk.com/ISOBlueApp/oauth2/redirect.html\"; // for production\n//const _REDIRECT_LOCALHOST = \"http://localhost:8000/oauth2/redirect.html\"; // for local test\n\nconst _CURRENT_METADATA = _OPENATK_METADATA;\nconst _CURRENT_REDIRECT = _REDIRECT_OPENATK;\n\nexport var signOut = [\n  set(state`Connections.oada_token`, \"\"),\n  set(state`Connections.oada_domain`, \"\"),\n  set(state`Connections.oada_fields_domain`, \"\"),\n  set(state`Connections.oada_domain_text`, \"\"),\n  set(state`Connections.oada_fields_domain_text`, \"\"),\n];\n\nexport var updateOadaDomain = [\n  set(state`connection.oada_domain_text`, props`value`),\n];\n\nexport var init = [\n  ({ state }) => ({\n    domain: state.get(\"connection.oada_domain\"),\n    options: {\n      redirect: _CURRENT_REDIRECT,\n      metadata: _CURRENT_METADATA,\n      scope: _SCOPE,\n    },\n    connection_id: state.get(\"operations.connection_id\"),\n    signals: [\"fields.handleWatchUpdate\"],\n  }),\n  oada.connect,\n  set(state`data.connection_id`, props`connection_id`), // FIXME: remove this line\n  set(state`connection.connection_id`, props`connection_id`),\n  set(state`connection.dialog_open`, false),\n];\n\nexport var setConnection = [\n  set(state`connection.oada_domain`, state`connection.oada_domain_text`),\n  init,\n  data.init,\n  snapshots.createSnapshots,\n];\n\nfunction clearConnection({ state, props }) {\n  const connection_id = state.get(\"connection.connection_id\");\n  /* cleaning up connections from oada state */\n  state.unset(\"oada.connections\");\n  /* cleaning up previous connection_id from oada state */\n  state.unset(\"oada.\" + connection_id);\n}\n","import { Module } from \"cerebral\";\nimport oadaProvider from \"@oada/cerebral-provider\";\nimport * as signals from \"./sequences\";\n\nlet _OADA_HOST = \"https://oada.openatk.com\";\nlet _CURRENT_HOST = _OADA_HOST;\n\nexport default Module({\n  state: {\n    dialog_open: true,\n    oada_domain_text: _CURRENT_HOST,\n    oada_domain: _CURRENT_HOST,\n  },\n  signals,\n  providers: {\n    oada: oadaProvider,\n  },\n});\n","import { sequence } from \"cerebral\";\n\nexport const init = sequence(\"init\", []);\n","import { Module } from \"cerebral\";\n\nimport session from \"../session/\";\nimport diagnostics from \"../diagnostics/\";\nimport map from \"../map/\";\nimport data from \"../data/\";\nimport snapshots from \"../snapshots/\";\nimport connection from \"../connection/\";\nimport oadaModule from \"@oada/cerebral-module\";\nimport oadaProvider from \"@oada/cerebral-provider\";\nimport * as signals from \"./sequences\";\n\nexport default Module({\n  modules: {\n    connection,\n    session,\n    oada: oadaModule,\n    diagnostics,\n    map,\n    data,\n    snapshots,\n  },\n  signals,\n  providers: {\n    oada: oadaProvider,\n  },\n});\n","import { Controller } from \"cerebral\";\nimport root from \"./modules/root\";\nimport Devtools from \"cerebral/devtools\";\n\nexport default Controller(root, {\n  devtools:\n    process.env.NODE_ENV === \"production\"\n      ? null\n      : Devtools({ host: \"localhost:8787\" }),\n  //devtools: null,\n});\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport App from \"./components/App/\";\n\nimport { Container } from \"@cerebral/react\";\nimport controller from \"./controller\";\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n});\n\nrender(\n  <Container controller={controller}>\n    <MuiThemeProvider theme={theme}>\n      <App />\n    </MuiThemeProvider>\n  </Container>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}